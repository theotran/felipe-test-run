'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ReactTableDefaults = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };
//


var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _classnames = require('classnames');

var _classnames2 = _interopRequireDefault(_classnames);

var _utils = require('./utils');

var _utils2 = _interopRequireDefault(_utils);

var _lifecycle = require('./lifecycle');

var _lifecycle2 = _interopRequireDefault(_lifecycle);

var _methods = require('./methods');

var _methods2 = _interopRequireDefault(_methods);

var _defaultProps = require('./defaultProps');

var _defaultProps2 = _interopRequireDefault(_defaultProps);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var ReactTableDefaults = exports.ReactTableDefaults = _defaultProps2.default;

exports.default = _react2.default.createClass(_extends({
  displayName: 'src'
}, _lifecycle2.default, _methods2.default, {
  render: function render() {
    var _this = this;

    var resolvedState = this.getResolvedState();
    var children = resolvedState.children,
        className = resolvedState.className,
        style = resolvedState.style,
        getProps = resolvedState.getProps,
        getTableProps = resolvedState.getTableProps,
        getTheadGroupProps = resolvedState.getTheadGroupProps,
        getTheadGroupTrProps = resolvedState.getTheadGroupTrProps,
        getTheadGroupThProps = resolvedState.getTheadGroupThProps,
        getTheadProps = resolvedState.getTheadProps,
        getTheadTrProps = resolvedState.getTheadTrProps,
        getTheadThProps = resolvedState.getTheadThProps,
        getTheadFilterProps = resolvedState.getTheadFilterProps,
        getTheadFilterTrProps = resolvedState.getTheadFilterTrProps,
        getTheadFilterThProps = resolvedState.getTheadFilterThProps,
        getTbodyProps = resolvedState.getTbodyProps,
        getTrGroupProps = resolvedState.getTrGroupProps,
        getTrProps = resolvedState.getTrProps,
        getTdProps = resolvedState.getTdProps,
        getTfootProps = resolvedState.getTfootProps,
        getTfootTrProps = resolvedState.getTfootTrProps,
        getTfootTdProps = resolvedState.getTfootTdProps,
        getPaginationProps = resolvedState.getPaginationProps,
        getLoadingProps = resolvedState.getLoadingProps,
        getNoDataProps = resolvedState.getNoDataProps,
        getResizerProps = resolvedState.getResizerProps,
        showPagination = resolvedState.showPagination,
        expanderColumnWidth = resolvedState.expanderColumnWidth,
        manual = resolvedState.manual,
        loadingText = resolvedState.loadingText,
        noDataText = resolvedState.noDataText,
        showFilters = resolvedState.showFilters,
        resizable = resolvedState.resizable,
        loading = resolvedState.loading,
        pageSize = resolvedState.pageSize,
        page = resolvedState.page,
        sorting = resolvedState.sorting,
        filtering = resolvedState.filtering,
        resizing = resolvedState.resizing,
        pages = resolvedState.pages,
        pivotValKey = resolvedState.pivotValKey,
        subRowsKey = resolvedState.subRowsKey,
        expandedRows = resolvedState.expandedRows,
        onExpandRow = resolvedState.onExpandRow,
        TableComponent = resolvedState.TableComponent,
        TheadComponent = resolvedState.TheadComponent,
        TbodyComponent = resolvedState.TbodyComponent,
        TrGroupComponent = resolvedState.TrGroupComponent,
        TrComponent = resolvedState.TrComponent,
        ThComponent = resolvedState.ThComponent,
        TdComponent = resolvedState.TdComponent,
        TfootComponent = resolvedState.TfootComponent,
        ExpanderComponent = resolvedState.ExpanderComponent,
        PaginationComponent = resolvedState.PaginationComponent,
        LoadingComponent = resolvedState.LoadingComponent,
        SubComponent = resolvedState.SubComponent,
        NoDataComponent = resolvedState.NoDataComponent,
        ResizerComponent = resolvedState.ResizerComponent,
        resolvedData = resolvedState.resolvedData,
        allVisibleColumns = resolvedState.allVisibleColumns,
        headerGroups = resolvedState.headerGroups,
        hasHeaderGroups = resolvedState.hasHeaderGroups,
        sortedData = resolvedState.sortedData;

    // Pagination

    var startRow = pageSize * page;
    var endRow = startRow + pageSize;
    var pageRows = manual ? resolvedData : sortedData.slice(startRow, endRow);
    var minRows = this.getMinRows();
    var padRows = _utils2.default.range(Math.max(minRows - pageRows.length, 0));

    var hasColumnFooter = allVisibleColumns.some(function (d) {
      return d.footer;
    });

    var recurseRowsViewIndex = function recurseRowsViewIndex(rows) {
      var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
      var index = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : -1;

      rows.forEach(function (row, i) {
        index++;
        row._viewIndex = index;
        var newPath = path.concat([i]);
        if (row[subRowsKey] && _utils2.default.get(expandedRows, newPath)) {
          index = recurseRowsViewIndex(row[subRowsKey], newPath, index);
        }
      });
      return index;
    };

    recurseRowsViewIndex(pageRows);

    var canPrevious = page > 0;
    var canNext = page + 1 < pages;

    var rowMinWidth = _utils2.default.sum(allVisibleColumns.map(function (d) {
      var resized = resizing.find(function (x) {
        return x.id === d.id;
      }) || {};
      return _utils2.default.getFirstDefined(resized.value, d.width, d.minWidth);
    }));

    var rowIndex = -1;

    var finalState = _extends({}, resolvedState, {
      startRow: startRow,
      endRow: endRow,
      pageRows: pageRows,
      minRows: minRows,
      padRows: padRows,
      hasColumnFooter: hasColumnFooter,
      canPrevious: canPrevious,
      canNext: canNext,
      rowMinWidth: rowMinWidth
    });

    // Visual Components

    var makeHeaderGroups = function makeHeaderGroups() {
      var theadGroupProps = _utils2.default.splitProps(getTheadGroupProps(finalState, undefined, undefined, _this));
      var theadGroupTrProps = _utils2.default.splitProps(getTheadGroupTrProps(finalState, undefined, undefined, _this));
      return _react2.default.createElement(
        TheadComponent,
        _extends({
          className: (0, _classnames2.default)('-headerGroups', theadGroupProps.className),
          style: _extends({}, theadGroupProps.style, {
            minWidth: rowMinWidth + 'px'
          })
        }, theadGroupProps.rest),
        _react2.default.createElement(
          TrComponent,
          _extends({
            className: theadGroupTrProps.className,
            style: theadGroupTrProps.style
          }, theadGroupTrProps.rest),
          headerGroups.map(makeHeaderGroup)
        )
      );
    };

    var makeHeaderGroup = function makeHeaderGroup(column, i) {
      var flex = _utils2.default.sum(column.columns.map(function (d) {
        var resized = resizing.find(function (x) {
          return x.id === d.id;
        }) || {};
        return d.width || resized.value ? 0 : d.minWidth;
      }));
      var width = _utils2.default.sum(column.columns.map(function (d) {
        var resized = resizing.find(function (x) {
          return x.id === d.id;
        }) || {};
        return _utils2.default.getFirstDefined(resized.value, d.width, d.minWidth);
      }));
      var maxWidth = _utils2.default.sum(column.columns.map(function (d) {
        var resized = resizing.find(function (x) {
          return x.id === d.id;
        }) || {};
        return _utils2.default.getFirstDefined(resized.value, d.width, d.maxWidth);
      }));
      var theadGroupThProps = _utils2.default.splitProps(getTheadGroupThProps(finalState, undefined, column, _this));
      var columnHeaderProps = _utils2.default.splitProps(column.getHeaderProps(finalState, undefined, column, _this));

      var classes = [column.headerClassName, theadGroupThProps.className, columnHeaderProps.className];

      var styles = _extends({}, column.headerStyle, theadGroupThProps.style, columnHeaderProps.style);

      var rest = _extends({}, theadGroupThProps.rest, columnHeaderProps.rest);

      var flexStyles = {
        flex: flex + ' 0 auto',
        width: width + 'px',
        maxWidth: maxWidth + 'px'
      };

      if (column.expander) {
        if (column.pivotColumns) {
          return _react2.default.createElement(ThComponent, _extends({
            key: i,
            className: (0, _classnames2.default)('rt-pivot-header', classes),
            style: _extends({}, styles, flexStyles)
          }, rest));
        }
        return _react2.default.createElement(ThComponent, _extends({
          key: i,
          className: (0, _classnames2.default)('rt-expander-header', classes),
          style: _extends({}, styles, {
            flex: '0 0 auto',
            width: expanderColumnWidth + 'px'
          })
        }, rest));
      }
      return _react2.default.createElement(
        ThComponent,
        _extends({
          key: i,
          className: (0, _classnames2.default)(classes),
          style: _extends({}, styles, flexStyles)
        }, rest),
        _utils2.default.normalizeComponent(column.header, {
          data: sortedData,
          column: column
        })
      );
    };

    var makeHeaders = function makeHeaders() {
      var theadProps = _utils2.default.splitProps(getTheadProps(finalState, undefined, undefined, _this));
      var theadTrProps = _utils2.default.splitProps(getTheadTrProps(finalState, undefined, undefined, _this));
      return _react2.default.createElement(
        TheadComponent,
        _extends({
          className: (0, _classnames2.default)('-header', theadProps.className),
          style: _extends({}, theadProps.style, {
            minWidth: rowMinWidth + 'px'
          })
        }, theadProps.rest),
        _react2.default.createElement(
          TrComponent,
          _extends({
            className: theadTrProps.className,
            style: theadTrProps.style
          }, theadTrProps.rest),
          allVisibleColumns.map(makeHeader)
        )
      );
    };

    var makeHeader = function makeHeader(column, i) {
      var resized = resizing.find(function (x) {
        return x.id === column.id;
      }) || {};
      var sort = sorting.find(function (d) {
        return d.id === column.id;
      });
      var show = typeof column.show === 'function' ? column.show() : column.show;
      var width = _utils2.default.getFirstDefined(resized.value, column.width, column.minWidth);
      var maxWidth = _utils2.default.getFirstDefined(resized.value, column.width, column.maxWidth);
      var theadThProps = _utils2.default.splitProps(getTheadThProps(finalState, undefined, column, _this));
      var columnHeaderProps = _utils2.default.splitProps(column.getHeaderProps(finalState, undefined, column, _this));

      var classes = [column.headerClassName, theadThProps.className, columnHeaderProps.className];

      var styles = _extends({}, column.headerStyle, theadThProps.style, columnHeaderProps.style);

      var rest = _extends({}, theadThProps.rest, columnHeaderProps.rest);

      var resizer = resizable ? _react2.default.createElement(ResizerComponent, _extends({
        onMouseDown: function onMouseDown(e) {
          return _this.resizeColumnStart(column, e, false);
        },
        onTouchStart: function onTouchStart(e) {
          return _this.resizeColumnStart(column, e, true);
        }
      }, resizerProps)) : null;

      if (column.expander) {
        if (column.pivotColumns) {
          var pivotSort = sorting.find(function (d) {
            return d.id === column.id;
          });
          return _react2.default.createElement(
            ThComponent,
            _extends({
              key: i,
              className: (0, _classnames2.default)('rt-pivot-header', 'rt-resizable-header', column.sortable && '-cursor-pointer', classes, pivotSort ? pivotSort.desc ? '-sort-desc' : '-sort-asc' : ''),
              style: _extends({}, styles, {
                flex: width + ' 0 auto',
                width: width + 'px',
                maxWidth: maxWidth + 'px'
              }),
              toggleSort: function toggleSort(e) {
                column.sortable && _this.sortColumn(column.pivotColumns, e.shiftKey);
              }
            }, rest),
            _react2.default.createElement(
              'div',
              { className: 'rt-resizable-header-content' },
              column.pivotColumns.map(function (pivotColumn, i) {
                return _react2.default.createElement(
                  'span',
                  { key: pivotColumn.id },
                  _utils2.default.normalizeComponent(pivotColumn.header, {
                    data: sortedData,
                    column: column
                  }),
                  i < column.pivotColumns.length - 1 && _react2.default.createElement(ExpanderComponent, null)
                );
              })
            ),
            resizer
          );
        }
        return _react2.default.createElement(ThComponent, _extends({
          key: i,
          className: (0, _classnames2.default)('rt-expander-header', classes),
          style: _extends({}, styles, {
            flex: '0 0 auto',
            width: expanderColumnWidth + 'px'
          })
        }, rest));
      }

      return _react2.default.createElement(
        ThComponent,
        _extends({
          key: i,
          className: (0, _classnames2.default)(classes, 'rt-resizable-header', sort ? sort.desc ? '-sort-desc' : '-sort-asc' : '', column.sortable && '-cursor-pointer', !show && '-hidden'),
          style: _extends({}, styles, {
            flex: width + ' 0 auto',
            width: width + 'px',
            maxWidth: maxWidth + 'px'
          }),
          toggleSort: function toggleSort(e) {
            column.sortable && _this.sortColumn(column, e.shiftKey);
          }
        }, rest),
        _react2.default.createElement(
          'div',
          { className: 'rt-resizable-header-content' },
          _utils2.default.normalizeComponent(column.header, {
            data: sortedData,
            column: column
          })
        ),
        resizer
      );
    };

    var makeFilters = function makeFilters() {
      var theadFilterProps = _utils2.default.splitProps(getTheadFilterProps(finalState, undefined, undefined, _this));
      var theadFilterTrProps = _utils2.default.splitProps(getTheadFilterTrProps(finalState, undefined, undefined, _this));
      return _react2.default.createElement(
        TheadComponent,
        _extends({
          className: (0, _classnames2.default)('-filters', theadFilterProps.className),
          style: _extends({}, theadFilterProps.style, {
            minWidth: rowMinWidth + 'px'
          })
        }, theadFilterProps.rest),
        _react2.default.createElement(
          TrComponent,
          _extends({
            className: theadFilterTrProps.className,
            style: theadFilterTrProps.style
          }, theadFilterTrProps.rest),
          allVisibleColumns.map(makeFilter)
        )
      );
    };

    var makeFilter = function makeFilter(column, i) {
      var resized = resizing.find(function (x) {
        return x.id === column.id;
      }) || {};
      var width = _utils2.default.getFirstDefined(resized.value, column.width, column.minWidth);
      var maxWidth = _utils2.default.getFirstDefined(resized.value, column.width, column.maxWidth);
      var theadFilterThProps = _utils2.default.splitProps(getTheadFilterThProps(finalState, undefined, column, _this));
      var columnHeaderProps = _utils2.default.splitProps(column.getHeaderProps(finalState, undefined, column, _this));

      var classes = [column.headerClassName, theadFilterThProps.className, columnHeaderProps.className];

      var styles = _extends({}, column.headerStyle, theadFilterThProps.style, columnHeaderProps.style);

      var rest = _extends({}, theadFilterThProps.rest, columnHeaderProps.rest);

      if (column.expander) {
        if (column.pivotColumns) {
          var pivotCols = [];

          var _loop = function _loop(_i) {
            var col = column.pivotColumns[_i];
            var filter = filtering.find(function (filter) {
              return filter.id === column.id && filter.pivotId === col.id;
            });
            pivotCols.push(_react2.default.createElement(
              'span',
              { key: col.id,
                style: { flex: 1 } },
              !col.hideFilter ? _utils2.default.normalizeComponent(col.filterRender, {
                col: col,
                filter: filter,
                onFilterChange: function onFilterChange(value) {
                  return _this.filterColumn(column, value, col);
                }
              }, _defaultProps2.default.column.filterRender) : null
            ));
            if (_i < column.pivotColumns.length - 1) {
              pivotCols.push(_react2.default.createElement(ExpanderComponent, { key: col.id + '-' + _i }));
            }
          };

          for (var _i = 0; _i < column.pivotColumns.length; _i++) {
            _loop(_i);
          }
          return _react2.default.createElement(
            ThComponent,
            _extends({
              key: i,
              className: (0, _classnames2.default)('rt-pivot-header', column.sortable && '-cursor-pointer', classes),
              style: _extends({}, styles, {
                flex: width + ' 0 auto',
                width: width + 'px',
                maxWidth: maxWidth + 'px',
                display: 'flex'
              })
            }, rest),
            pivotCols
          );
        }
        return _react2.default.createElement(ThComponent, _extends({
          key: i,
          className: (0, _classnames2.default)('rt-expander-header', classes),
          style: _extends({}, styles, {
            flex: '0 0 auto',
            width: expanderColumnWidth + 'px'
          })
        }, rest));
      }

      var filter = filtering.find(function (filter) {
        return filter.id === column.id;
      });

      return _react2.default.createElement(
        ThComponent,
        _extends({
          key: i,
          className: (0, _classnames2.default)(classes),
          style: _extends({}, styles, {
            flex: width + ' 0 auto',
            width: width + 'px',
            maxWidth: maxWidth + 'px'
          })
        }, rest),
        !column.hideFilter ? _utils2.default.normalizeComponent(column.filterRender, {
          column: column,
          filter: filter,
          onFilterChange: function onFilterChange(value) {
            return _this.filterColumn(column, value);
          }
        }, _defaultProps2.default.column.filterRender) : null
      );
    };

    var makePageRow = function makePageRow(row, i) {
      var path = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];

      var rowInfo = {
        row: row.__original,
        rowValues: row,
        index: row.__index,
        viewIndex: ++rowIndex,
        level: path.length,
        nestingPath: path.concat([i]),
        aggregated: !!row[subRowsKey],
        subRows: row[subRowsKey]
      };
      var isExpanded = _utils2.default.get(expandedRows, rowInfo.nestingPath);
      var trGroupProps = getTrGroupProps(finalState, rowInfo, undefined, _this);
      var trProps = _utils2.default.splitProps(getTrProps(finalState, rowInfo, undefined, _this));
      return _react2.default.createElement(
        TrGroupComponent,
        _extends({
          key: rowInfo.nestingPath.join('_')
        }, trGroupProps),
        _react2.default.createElement(
          TrComponent,
          _extends({
            className: (0, _classnames2.default)(trProps.className, row._viewIndex % 2 ? '-even' : '-odd'),
            style: trProps.style
          }, trProps.rest),
          allVisibleColumns.map(function (column, i2) {
            var resized = resizing.find(function (x) {
              return x.id === column.id;
            }) || {};
            var show = typeof column.show === 'function' ? column.show() : column.show;
            var width = _utils2.default.getFirstDefined(resized.value, column.width, column.minWidth);
            var maxWidth = _utils2.default.getFirstDefined(resized.value, column.width, column.maxWidth);
            var tdProps = _utils2.default.splitProps(getTdProps(finalState, rowInfo, column, _this));
            var columnProps = _utils2.default.splitProps(column.getProps(finalState, rowInfo, column, _this));

            var classes = [tdProps.className, column.className, columnProps.className];

            var styles = _extends({}, tdProps.style, column.style, columnProps.style);

            if (column.expander) {
              var onTdClick = function onTdClick(e) {
                if (onExpandRow) {
                  return onExpandRow(rowInfo.nestingPath, e);
                }
                var newExpandedRows = _utils2.default.clone(expandedRows);
                if (isExpanded) {
                  return _this.setStateWithData({
                    expandedRows: _utils2.default.set(newExpandedRows, rowInfo.nestingPath, false)
                  });
                }
                return _this.setStateWithData({
                  expandedRows: _utils2.default.set(newExpandedRows, rowInfo.nestingPath, {})
                });
              };

              if (column.pivotColumns) {
                // Return the pivot expander cell
                var PivotCell = column.pivotRender;
                return _react2.default.createElement(
                  TdComponent,
                  _extends({
                    key: i2,
                    className: (0, _classnames2.default)('rt-pivot', classes),
                    style: _extends({}, styles, {
                      paddingLeft: rowInfo.nestingPath.length === 1 ? undefined : 30 * (rowInfo.nestingPath.length - 1) + 'px',
                      flex: width + ' 0 auto',
                      width: width + 'px',
                      maxWidth: maxWidth + 'px'
                    })
                  }, tdProps.rest, {
                    onClick: onTdClick
                  }),
                  rowInfo.subRows ? _react2.default.createElement(
                    'span',
                    null,
                    _react2.default.createElement(ExpanderComponent, {
                      isExpanded: isExpanded
                    }),
                    column && column.pivotRender ? _react2.default.createElement(PivotCell, _extends({}, rowInfo, {
                      value: rowInfo.rowValues[pivotValKey]
                    })) : _react2.default.createElement(
                      'span',
                      null,
                      row[pivotValKey],
                      ' (',
                      rowInfo.subRows.length,
                      ')'
                    )
                  ) : SubComponent ? _react2.default.createElement(
                    'span',
                    null,
                    _react2.default.createElement(ExpanderComponent, {
                      isExpanded: isExpanded
                    })
                  ) : null
                );
              }

              // Return the regular expander cell
              return _react2.default.createElement(
                TdComponent,
                {
                  key: i2,
                  className: (0, _classnames2.default)(classes, { hidden: !show }),
                  style: _extends({}, styles, {
                    flex: '0 0 auto',
                    width: expanderColumnWidth + 'px'
                  }),
                  onClick: onTdClick
                },
                _react2.default.createElement(
                  'span',
                  null,
                  _react2.default.createElement(ExpanderComponent, {
                    isExpanded: isExpanded
                  })
                )
              );
            }

            // Return regular cell
            return _react2.default.createElement(
              TdComponent,
              _extends({
                key: i2,
                className: (0, _classnames2.default)(classes, !show && 'hidden'),
                style: _extends({}, styles, {
                  flex: width + ' 0 auto',
                  width: width + 'px',
                  maxWidth: maxWidth + 'px'
                })
              }, tdProps.rest),
              _utils2.default.normalizeComponent(column.render, _extends({}, rowInfo, {
                value: rowInfo.rowValues[column.id]
              }), rowInfo.rowValues[column.id])
            );
          })
        ),
        rowInfo.subRows && isExpanded && rowInfo.subRows.map(function (d, i) {
          return makePageRow(d, i, rowInfo.nestingPath);
        }),
        SubComponent && !rowInfo.subRows && isExpanded && SubComponent(rowInfo)
      );
    };

    var makePadRow = function makePadRow(row, i) {
      var trGroupProps = getTrGroupProps(finalState, undefined, undefined, _this);
      var trProps = _utils2.default.splitProps(getTrProps(finalState, undefined, undefined, _this));
      return _react2.default.createElement(
        TrGroupComponent,
        _extends({
          key: i
        }, trGroupProps),
        _react2.default.createElement(
          TrComponent,
          {
            className: (0, _classnames2.default)('-padRow', trProps.className),
            style: trProps.style || {}
          },
          allVisibleColumns.map(function (column, i2) {
            var resized = resizing.find(function (x) {
              return x.id === column.id;
            }) || {};
            var show = typeof column.show === 'function' ? column.show() : column.show;
            var width = _utils2.default.getFirstDefined(resized.value, column.width, column.minWidth);
            var maxWidth = _utils2.default.getFirstDefined(resized.value, column.width, column.maxWidth);
            var tdProps = _utils2.default.splitProps(getTdProps(finalState, undefined, column, _this));
            var columnProps = _utils2.default.splitProps(column.getProps(finalState, undefined, column, _this));

            var classes = [tdProps.className, column.className, columnProps.className];

            var styles = _extends({}, tdProps.style, column.style, columnProps.style);

            return _react2.default.createElement(
              TdComponent,
              _extends({
                key: i2,
                className: (0, _classnames2.default)(classes, !show && 'hidden'),
                style: _extends({}, styles, {
                  flex: width + ' 0 auto',
                  width: width + 'px',
                  maxWidth: maxWidth + 'px'
                })
              }, tdProps.rest),
              '\xA0'
            );
          })
        )
      );
    };

    var makeColumnFooters = function makeColumnFooters() {
      var tFootProps = getTfootProps(finalState, undefined, undefined, _this);
      var tFootTrProps = _utils2.default.splitProps(getTfootTrProps(finalState, undefined, undefined, _this));
      return _react2.default.createElement(
        TfootComponent,
        _extends({
          className: tFootProps.className,
          style: _extends({}, tFootProps.style, {
            minWidth: rowMinWidth + 'px'
          })
        }, tFootProps.rest),
        _react2.default.createElement(
          TrComponent,
          _extends({
            className: (0, _classnames2.default)(tFootTrProps.className),
            style: tFootTrProps.style
          }, tFootTrProps.rest),
          allVisibleColumns.map(function (column, i2) {
            var resized = resizing.find(function (x) {
              return x.id === column.id;
            }) || {};
            var show = typeof column.show === 'function' ? column.show() : column.show;
            var width = _utils2.default.getFirstDefined(resized.value, column.width, column.minWidth);
            var maxWidth = _utils2.default.getFirstDefined(resized.value, column.width, column.maxWidth);
            var tFootTdProps = _utils2.default.splitProps(getTfootTdProps(finalState, undefined, undefined, _this));
            var columnProps = _utils2.default.splitProps(column.getProps(finalState, undefined, column, _this));
            var columnFooterProps = _utils2.default.splitProps(column.getFooterProps(finalState, undefined, column, _this));

            var classes = [tFootTdProps.className, column.className, columnProps.className, columnFooterProps.className];

            var styles = _extends({}, tFootTdProps.style, column.style, columnProps.style, columnFooterProps.style);

            if (column.expander) {
              if (column.pivotColumns) {
                return _react2.default.createElement(
                  TdComponent,
                  _extends({
                    key: i2,
                    className: (0, _classnames2.default)('rt-pivot', classes),
                    style: _extends({}, styles, {
                      flex: width + ' 0 auto',
                      width: width + 'px',
                      maxWidth: maxWidth + 'px'
                    })
                  }, columnProps.rest, tFootTdProps.rest, columnFooterProps.rest),
                  _utils2.default.normalizeComponent(column.footer)
                );
              }

              // Return the regular expander cell
              return _react2.default.createElement(TdComponent, {
                key: i2,
                className: (0, _classnames2.default)(classes, { hidden: !show }),
                style: _extends({}, styles, {
                  flex: '0 0 auto',
                  width: expanderColumnWidth + 'px'
                })
              });
            }

            // Return regular cell
            return _react2.default.createElement(
              TdComponent,
              _extends({
                key: i2,
                className: (0, _classnames2.default)(classes, !show && 'hidden'),
                style: _extends({}, styles, {
                  flex: width + ' 0 auto',
                  width: width + 'px',
                  maxWidth: maxWidth + 'px'
                })
              }, columnProps.rest, tFootTdProps.rest, columnFooterProps.rest),
              _utils2.default.normalizeComponent(column.footer, {
                data: sortedData,
                column: column
              })
            );
          })
        )
      );
    };

    var rootProps = _utils2.default.splitProps(getProps(finalState, undefined, undefined, this));
    var tableProps = _utils2.default.splitProps(getTableProps(finalState, undefined, undefined, this));
    var tBodyProps = _utils2.default.splitProps(getTbodyProps(finalState, undefined, undefined, this));
    var paginationProps = _utils2.default.splitProps(getPaginationProps(finalState, undefined, undefined, this));
    var loadingProps = getLoadingProps(finalState, undefined, undefined, this);
    var noDataProps = getNoDataProps(finalState, undefined, undefined, this);
    var resizerProps = getResizerProps(finalState, undefined, undefined, this);

    var makeTable = function makeTable() {
      return _react2.default.createElement(
        'div',
        _extends({
          className: (0, _classnames2.default)('ReactTable', className, rootProps.className),
          style: _extends({}, style, rootProps.style)
        }, rootProps.rest),
        _react2.default.createElement(
          TableComponent,
          _extends({
            className: (0, _classnames2.default)(tableProps.className),
            style: tableProps.style
          }, tableProps.rest),
          hasHeaderGroups ? makeHeaderGroups() : null,
          makeHeaders(),
          showFilters ? makeFilters() : null,
          _react2.default.createElement(
            TbodyComponent,
            _extends({
              className: (0, _classnames2.default)(tBodyProps.className),
              style: _extends({}, tBodyProps.style, {
                minWidth: rowMinWidth + 'px'
              })
            }, tBodyProps.rest),
            pageRows.map(function (d, i) {
              return makePageRow(d, i);
            }),
            padRows.map(makePadRow)
          ),
          hasColumnFooter ? makeColumnFooters() : null
        ),
        showPagination ? _react2.default.createElement(PaginationComponent, _extends({}, resolvedState, {
          pages: pages,
          canPrevious: canPrevious,
          canNext: canNext,
          onPageChange: _this.onPageChange,
          onPageSizeChange: _this.onPageSizeChange,
          className: paginationProps.className,
          style: paginationProps.style
        }, paginationProps.rest)) : null,
        !pageRows.length && _react2.default.createElement(
          NoDataComponent,
          noDataProps,
          _utils2.default.normalizeComponent(noDataText)
        ),
        _react2.default.createElement(LoadingComponent, _extends({
          loading: loading,
          loadingText: loadingText
        }, loadingProps))
      );
    };

    // childProps are optionally passed to a function-as-a-child
    return children ? children(finalState, makeTable, this) : makeTable();
  }
}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJSZWFjdFRhYmxlRGVmYXVsdHMiLCJjcmVhdGVDbGFzcyIsInJlbmRlciIsInJlc29sdmVkU3RhdGUiLCJnZXRSZXNvbHZlZFN0YXRlIiwiY2hpbGRyZW4iLCJjbGFzc05hbWUiLCJzdHlsZSIsImdldFByb3BzIiwiZ2V0VGFibGVQcm9wcyIsImdldFRoZWFkR3JvdXBQcm9wcyIsImdldFRoZWFkR3JvdXBUclByb3BzIiwiZ2V0VGhlYWRHcm91cFRoUHJvcHMiLCJnZXRUaGVhZFByb3BzIiwiZ2V0VGhlYWRUclByb3BzIiwiZ2V0VGhlYWRUaFByb3BzIiwiZ2V0VGhlYWRGaWx0ZXJQcm9wcyIsImdldFRoZWFkRmlsdGVyVHJQcm9wcyIsImdldFRoZWFkRmlsdGVyVGhQcm9wcyIsImdldFRib2R5UHJvcHMiLCJnZXRUckdyb3VwUHJvcHMiLCJnZXRUclByb3BzIiwiZ2V0VGRQcm9wcyIsImdldFRmb290UHJvcHMiLCJnZXRUZm9vdFRyUHJvcHMiLCJnZXRUZm9vdFRkUHJvcHMiLCJnZXRQYWdpbmF0aW9uUHJvcHMiLCJnZXRMb2FkaW5nUHJvcHMiLCJnZXROb0RhdGFQcm9wcyIsImdldFJlc2l6ZXJQcm9wcyIsInNob3dQYWdpbmF0aW9uIiwiZXhwYW5kZXJDb2x1bW5XaWR0aCIsIm1hbnVhbCIsImxvYWRpbmdUZXh0Iiwibm9EYXRhVGV4dCIsInNob3dGaWx0ZXJzIiwicmVzaXphYmxlIiwibG9hZGluZyIsInBhZ2VTaXplIiwicGFnZSIsInNvcnRpbmciLCJmaWx0ZXJpbmciLCJyZXNpemluZyIsInBhZ2VzIiwicGl2b3RWYWxLZXkiLCJzdWJSb3dzS2V5IiwiZXhwYW5kZWRSb3dzIiwib25FeHBhbmRSb3ciLCJUYWJsZUNvbXBvbmVudCIsIlRoZWFkQ29tcG9uZW50IiwiVGJvZHlDb21wb25lbnQiLCJUckdyb3VwQ29tcG9uZW50IiwiVHJDb21wb25lbnQiLCJUaENvbXBvbmVudCIsIlRkQ29tcG9uZW50IiwiVGZvb3RDb21wb25lbnQiLCJFeHBhbmRlckNvbXBvbmVudCIsIlBhZ2luYXRpb25Db21wb25lbnQiLCJMb2FkaW5nQ29tcG9uZW50IiwiU3ViQ29tcG9uZW50IiwiTm9EYXRhQ29tcG9uZW50IiwiUmVzaXplckNvbXBvbmVudCIsInJlc29sdmVkRGF0YSIsImFsbFZpc2libGVDb2x1bW5zIiwiaGVhZGVyR3JvdXBzIiwiaGFzSGVhZGVyR3JvdXBzIiwic29ydGVkRGF0YSIsInN0YXJ0Um93IiwiZW5kUm93IiwicGFnZVJvd3MiLCJzbGljZSIsIm1pblJvd3MiLCJnZXRNaW5Sb3dzIiwicGFkUm93cyIsInJhbmdlIiwiTWF0aCIsIm1heCIsImxlbmd0aCIsImhhc0NvbHVtbkZvb3RlciIsInNvbWUiLCJkIiwiZm9vdGVyIiwicmVjdXJzZVJvd3NWaWV3SW5kZXgiLCJyb3dzIiwicGF0aCIsImluZGV4IiwiZm9yRWFjaCIsInJvdyIsImkiLCJfdmlld0luZGV4IiwibmV3UGF0aCIsImNvbmNhdCIsImdldCIsImNhblByZXZpb3VzIiwiY2FuTmV4dCIsInJvd01pbldpZHRoIiwic3VtIiwibWFwIiwicmVzaXplZCIsImZpbmQiLCJ4IiwiaWQiLCJnZXRGaXJzdERlZmluZWQiLCJ2YWx1ZSIsIndpZHRoIiwibWluV2lkdGgiLCJyb3dJbmRleCIsImZpbmFsU3RhdGUiLCJtYWtlSGVhZGVyR3JvdXBzIiwidGhlYWRHcm91cFByb3BzIiwic3BsaXRQcm9wcyIsInVuZGVmaW5lZCIsInRoZWFkR3JvdXBUclByb3BzIiwicmVzdCIsIm1ha2VIZWFkZXJHcm91cCIsImNvbHVtbiIsImZsZXgiLCJjb2x1bW5zIiwibWF4V2lkdGgiLCJ0aGVhZEdyb3VwVGhQcm9wcyIsImNvbHVtbkhlYWRlclByb3BzIiwiZ2V0SGVhZGVyUHJvcHMiLCJjbGFzc2VzIiwiaGVhZGVyQ2xhc3NOYW1lIiwic3R5bGVzIiwiaGVhZGVyU3R5bGUiLCJmbGV4U3R5bGVzIiwiZXhwYW5kZXIiLCJwaXZvdENvbHVtbnMiLCJub3JtYWxpemVDb21wb25lbnQiLCJoZWFkZXIiLCJkYXRhIiwibWFrZUhlYWRlcnMiLCJ0aGVhZFByb3BzIiwidGhlYWRUclByb3BzIiwibWFrZUhlYWRlciIsInNvcnQiLCJzaG93IiwidGhlYWRUaFByb3BzIiwicmVzaXplciIsInJlc2l6ZUNvbHVtblN0YXJ0IiwiZSIsInJlc2l6ZXJQcm9wcyIsInBpdm90U29ydCIsInNvcnRhYmxlIiwiZGVzYyIsInNvcnRDb2x1bW4iLCJzaGlmdEtleSIsInBpdm90Q29sdW1uIiwibWFrZUZpbHRlcnMiLCJ0aGVhZEZpbHRlclByb3BzIiwidGhlYWRGaWx0ZXJUclByb3BzIiwibWFrZUZpbHRlciIsInRoZWFkRmlsdGVyVGhQcm9wcyIsInBpdm90Q29scyIsImNvbCIsImZpbHRlciIsInBpdm90SWQiLCJwdXNoIiwiaGlkZUZpbHRlciIsImZpbHRlclJlbmRlciIsIm9uRmlsdGVyQ2hhbmdlIiwiZmlsdGVyQ29sdW1uIiwiZGlzcGxheSIsIm1ha2VQYWdlUm93Iiwicm93SW5mbyIsIl9fb3JpZ2luYWwiLCJyb3dWYWx1ZXMiLCJfX2luZGV4Iiwidmlld0luZGV4IiwibGV2ZWwiLCJuZXN0aW5nUGF0aCIsImFnZ3JlZ2F0ZWQiLCJzdWJSb3dzIiwiaXNFeHBhbmRlZCIsInRyR3JvdXBQcm9wcyIsInRyUHJvcHMiLCJqb2luIiwiaTIiLCJ0ZFByb3BzIiwiY29sdW1uUHJvcHMiLCJvblRkQ2xpY2siLCJuZXdFeHBhbmRlZFJvd3MiLCJjbG9uZSIsInNldFN0YXRlV2l0aERhdGEiLCJzZXQiLCJQaXZvdENlbGwiLCJwaXZvdFJlbmRlciIsInBhZGRpbmdMZWZ0IiwiaGlkZGVuIiwibWFrZVBhZFJvdyIsIm1ha2VDb2x1bW5Gb290ZXJzIiwidEZvb3RQcm9wcyIsInRGb290VHJQcm9wcyIsInRGb290VGRQcm9wcyIsImNvbHVtbkZvb3RlclByb3BzIiwiZ2V0Rm9vdGVyUHJvcHMiLCJyb290UHJvcHMiLCJ0YWJsZVByb3BzIiwidEJvZHlQcm9wcyIsInBhZ2luYXRpb25Qcm9wcyIsImxvYWRpbmdQcm9wcyIsIm5vRGF0YVByb3BzIiwibWFrZVRhYmxlIiwib25QYWdlQ2hhbmdlIiwib25QYWdlU2l6ZUNoYW5nZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFFQTs7O0FBRkE7Ozs7QUFDQTs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFTyxJQUFNQSx3RUFBTjs7a0JBRVEsZ0JBQU1DLFdBQU47QUFBQTtBQUFBO0FBSWJDLFFBSmEsb0JBSUg7QUFBQTs7QUFDUixRQUFNQyxnQkFBZ0IsS0FBS0MsZ0JBQUwsRUFBdEI7QUFEUSxRQUdOQyxRQUhNLEdBc0VKRixhQXRFSSxDQUdORSxRQUhNO0FBQUEsUUFJTkMsU0FKTSxHQXNFSkgsYUF0RUksQ0FJTkcsU0FKTTtBQUFBLFFBS05DLEtBTE0sR0FzRUpKLGFBdEVJLENBS05JLEtBTE07QUFBQSxRQU1OQyxRQU5NLEdBc0VKTCxhQXRFSSxDQU1OSyxRQU5NO0FBQUEsUUFPTkMsYUFQTSxHQXNFSk4sYUF0RUksQ0FPTk0sYUFQTTtBQUFBLFFBUU5DLGtCQVJNLEdBc0VKUCxhQXRFSSxDQVFOTyxrQkFSTTtBQUFBLFFBU05DLG9CQVRNLEdBc0VKUixhQXRFSSxDQVNOUSxvQkFUTTtBQUFBLFFBVU5DLG9CQVZNLEdBc0VKVCxhQXRFSSxDQVVOUyxvQkFWTTtBQUFBLFFBV05DLGFBWE0sR0FzRUpWLGFBdEVJLENBV05VLGFBWE07QUFBQSxRQVlOQyxlQVpNLEdBc0VKWCxhQXRFSSxDQVlOVyxlQVpNO0FBQUEsUUFhTkMsZUFiTSxHQXNFSlosYUF0RUksQ0FhTlksZUFiTTtBQUFBLFFBY05DLG1CQWRNLEdBc0VKYixhQXRFSSxDQWNOYSxtQkFkTTtBQUFBLFFBZU5DLHFCQWZNLEdBc0VKZCxhQXRFSSxDQWVOYyxxQkFmTTtBQUFBLFFBZ0JOQyxxQkFoQk0sR0FzRUpmLGFBdEVJLENBZ0JOZSxxQkFoQk07QUFBQSxRQWlCTkMsYUFqQk0sR0FzRUpoQixhQXRFSSxDQWlCTmdCLGFBakJNO0FBQUEsUUFrQk5DLGVBbEJNLEdBc0VKakIsYUF0RUksQ0FrQk5pQixlQWxCTTtBQUFBLFFBbUJOQyxVQW5CTSxHQXNFSmxCLGFBdEVJLENBbUJOa0IsVUFuQk07QUFBQSxRQW9CTkMsVUFwQk0sR0FzRUpuQixhQXRFSSxDQW9CTm1CLFVBcEJNO0FBQUEsUUFxQk5DLGFBckJNLEdBc0VKcEIsYUF0RUksQ0FxQk5vQixhQXJCTTtBQUFBLFFBc0JOQyxlQXRCTSxHQXNFSnJCLGFBdEVJLENBc0JOcUIsZUF0Qk07QUFBQSxRQXVCTkMsZUF2Qk0sR0FzRUp0QixhQXRFSSxDQXVCTnNCLGVBdkJNO0FBQUEsUUF3Qk5DLGtCQXhCTSxHQXNFSnZCLGFBdEVJLENBd0JOdUIsa0JBeEJNO0FBQUEsUUF5Qk5DLGVBekJNLEdBc0VKeEIsYUF0RUksQ0F5Qk53QixlQXpCTTtBQUFBLFFBMEJOQyxjQTFCTSxHQXNFSnpCLGFBdEVJLENBMEJOeUIsY0ExQk07QUFBQSxRQTJCTkMsZUEzQk0sR0FzRUoxQixhQXRFSSxDQTJCTjBCLGVBM0JNO0FBQUEsUUE0Qk5DLGNBNUJNLEdBc0VKM0IsYUF0RUksQ0E0Qk4yQixjQTVCTTtBQUFBLFFBNkJOQyxtQkE3Qk0sR0FzRUo1QixhQXRFSSxDQTZCTjRCLG1CQTdCTTtBQUFBLFFBOEJOQyxNQTlCTSxHQXNFSjdCLGFBdEVJLENBOEJONkIsTUE5Qk07QUFBQSxRQStCTkMsV0EvQk0sR0FzRUo5QixhQXRFSSxDQStCTjhCLFdBL0JNO0FBQUEsUUFnQ05DLFVBaENNLEdBc0VKL0IsYUF0RUksQ0FnQ04rQixVQWhDTTtBQUFBLFFBaUNOQyxXQWpDTSxHQXNFSmhDLGFBdEVJLENBaUNOZ0MsV0FqQ007QUFBQSxRQWtDTkMsU0FsQ00sR0FzRUpqQyxhQXRFSSxDQWtDTmlDLFNBbENNO0FBQUEsUUFvQ05DLE9BcENNLEdBc0VKbEMsYUF0RUksQ0FvQ05rQyxPQXBDTTtBQUFBLFFBcUNOQyxRQXJDTSxHQXNFSm5DLGFBdEVJLENBcUNObUMsUUFyQ007QUFBQSxRQXNDTkMsSUF0Q00sR0FzRUpwQyxhQXRFSSxDQXNDTm9DLElBdENNO0FBQUEsUUF1Q05DLE9BdkNNLEdBc0VKckMsYUF0RUksQ0F1Q05xQyxPQXZDTTtBQUFBLFFBd0NOQyxTQXhDTSxHQXNFSnRDLGFBdEVJLENBd0NOc0MsU0F4Q007QUFBQSxRQXlDTkMsUUF6Q00sR0FzRUp2QyxhQXRFSSxDQXlDTnVDLFFBekNNO0FBQUEsUUEwQ05DLEtBMUNNLEdBc0VKeEMsYUF0RUksQ0EwQ053QyxLQTFDTTtBQUFBLFFBNENOQyxXQTVDTSxHQXNFSnpDLGFBdEVJLENBNENOeUMsV0E1Q007QUFBQSxRQTZDTkMsVUE3Q00sR0FzRUoxQyxhQXRFSSxDQTZDTjBDLFVBN0NNO0FBQUEsUUE4Q05DLFlBOUNNLEdBc0VKM0MsYUF0RUksQ0E4Q04yQyxZQTlDTTtBQUFBLFFBK0NOQyxXQS9DTSxHQXNFSjVDLGFBdEVJLENBK0NONEMsV0EvQ007QUFBQSxRQWlETkMsY0FqRE0sR0FzRUo3QyxhQXRFSSxDQWlETjZDLGNBakRNO0FBQUEsUUFrRE5DLGNBbERNLEdBc0VKOUMsYUF0RUksQ0FrRE44QyxjQWxETTtBQUFBLFFBbUROQyxjQW5ETSxHQXNFSi9DLGFBdEVJLENBbUROK0MsY0FuRE07QUFBQSxRQW9ETkMsZ0JBcERNLEdBc0VKaEQsYUF0RUksQ0FvRE5nRCxnQkFwRE07QUFBQSxRQXFETkMsV0FyRE0sR0FzRUpqRCxhQXRFSSxDQXFETmlELFdBckRNO0FBQUEsUUFzRE5DLFdBdERNLEdBc0VKbEQsYUF0RUksQ0FzRE5rRCxXQXRETTtBQUFBLFFBdUROQyxXQXZETSxHQXNFSm5ELGFBdEVJLENBdURObUQsV0F2RE07QUFBQSxRQXdETkMsY0F4RE0sR0FzRUpwRCxhQXRFSSxDQXdETm9ELGNBeERNO0FBQUEsUUF5RE5DLGlCQXpETSxHQXNFSnJELGFBdEVJLENBeUROcUQsaUJBekRNO0FBQUEsUUEwRE5DLG1CQTFETSxHQXNFSnRELGFBdEVJLENBMEROc0QsbUJBMURNO0FBQUEsUUEyRE5DLGdCQTNETSxHQXNFSnZELGFBdEVJLENBMkROdUQsZ0JBM0RNO0FBQUEsUUE0RE5DLFlBNURNLEdBc0VKeEQsYUF0RUksQ0E0RE53RCxZQTVETTtBQUFBLFFBNkROQyxlQTdETSxHQXNFSnpELGFBdEVJLENBNkROeUQsZUE3RE07QUFBQSxRQThETkMsZ0JBOURNLEdBc0VKMUQsYUF0RUksQ0E4RE4wRCxnQkE5RE07QUFBQSxRQWdFTkMsWUFoRU0sR0FzRUozRCxhQXRFSSxDQWdFTjJELFlBaEVNO0FBQUEsUUFpRU5DLGlCQWpFTSxHQXNFSjVELGFBdEVJLENBaUVONEQsaUJBakVNO0FBQUEsUUFrRU5DLFlBbEVNLEdBc0VKN0QsYUF0RUksQ0FrRU42RCxZQWxFTTtBQUFBLFFBbUVOQyxlQW5FTSxHQXNFSjlELGFBdEVJLENBbUVOOEQsZUFuRU07QUFBQSxRQXFFTkMsVUFyRU0sR0FzRUovRCxhQXRFSSxDQXFFTitELFVBckVNOztBQXdFUjs7QUFDQSxRQUFNQyxXQUFXN0IsV0FBV0MsSUFBNUI7QUFDQSxRQUFNNkIsU0FBU0QsV0FBVzdCLFFBQTFCO0FBQ0EsUUFBTStCLFdBQVdyQyxTQUFTOEIsWUFBVCxHQUF3QkksV0FBV0ksS0FBWCxDQUFpQkgsUUFBakIsRUFBMkJDLE1BQTNCLENBQXpDO0FBQ0EsUUFBTUcsVUFBVSxLQUFLQyxVQUFMLEVBQWhCO0FBQ0EsUUFBTUMsVUFBVSxnQkFBRUMsS0FBRixDQUFRQyxLQUFLQyxHQUFMLENBQVNMLFVBQVVGLFNBQVNRLE1BQTVCLEVBQW9DLENBQXBDLENBQVIsQ0FBaEI7O0FBRUEsUUFBTUMsa0JBQWtCZixrQkFBa0JnQixJQUFsQixDQUF1QjtBQUFBLGFBQUtDLEVBQUVDLE1BQVA7QUFBQSxLQUF2QixDQUF4Qjs7QUFFQSxRQUFNQyx1QkFBdUIsU0FBdkJBLG9CQUF1QixDQUFDQyxJQUFELEVBQWlDO0FBQUEsVUFBMUJDLElBQTBCLHVFQUFuQixFQUFtQjtBQUFBLFVBQWZDLEtBQWUsdUVBQVAsQ0FBQyxDQUFNOztBQUM1REYsV0FBS0csT0FBTCxDQUFhLFVBQUNDLEdBQUQsRUFBTUMsQ0FBTixFQUFZO0FBQ3ZCSDtBQUNBRSxZQUFJRSxVQUFKLEdBQWlCSixLQUFqQjtBQUNBLFlBQU1LLFVBQVVOLEtBQUtPLE1BQUwsQ0FBWSxDQUFDSCxDQUFELENBQVosQ0FBaEI7QUFDQSxZQUFJRCxJQUFJMUMsVUFBSixLQUFtQixnQkFBRStDLEdBQUYsQ0FBTTlDLFlBQU4sRUFBb0I0QyxPQUFwQixDQUF2QixFQUFxRDtBQUNuREwsa0JBQVFILHFCQUFxQkssSUFBSTFDLFVBQUosQ0FBckIsRUFBc0M2QyxPQUF0QyxFQUErQ0wsS0FBL0MsQ0FBUjtBQUNEO0FBQ0YsT0FQRDtBQVFBLGFBQU9BLEtBQVA7QUFDRCxLQVZEOztBQVlBSCx5QkFBcUJiLFFBQXJCOztBQUVBLFFBQU13QixjQUFjdEQsT0FBTyxDQUEzQjtBQUNBLFFBQU11RCxVQUFVdkQsT0FBTyxDQUFQLEdBQVdJLEtBQTNCOztBQUVBLFFBQU1vRCxjQUFjLGdCQUFFQyxHQUFGLENBQU1qQyxrQkFBa0JrQyxHQUFsQixDQUFzQixhQUFLO0FBQ25ELFVBQU1DLFVBQVV4RCxTQUFTeUQsSUFBVCxDQUFjO0FBQUEsZUFBS0MsRUFBRUMsRUFBRixLQUFTckIsRUFBRXFCLEVBQWhCO0FBQUEsT0FBZCxLQUFxQyxFQUFyRDtBQUNBLGFBQU8sZ0JBQUVDLGVBQUYsQ0FBa0JKLFFBQVFLLEtBQTFCLEVBQWlDdkIsRUFBRXdCLEtBQW5DLEVBQTBDeEIsRUFBRXlCLFFBQTVDLENBQVA7QUFDRCxLQUh5QixDQUFOLENBQXBCOztBQUtBLFFBQUlDLFdBQVcsQ0FBQyxDQUFoQjs7QUFFQSxRQUFNQywwQkFDRHhHLGFBREM7QUFFSmdFLHdCQUZJO0FBR0pDLG9CQUhJO0FBSUpDLHdCQUpJO0FBS0pFLHNCQUxJO0FBTUpFLHNCQU5JO0FBT0pLLHNDQVBJO0FBUUplLDhCQVJJO0FBU0pDLHNCQVRJO0FBVUpDO0FBVkksTUFBTjs7QUFhQTs7QUFFQSxRQUFNYSxtQkFBbUIsU0FBbkJBLGdCQUFtQixHQUFNO0FBQzdCLFVBQU1DLGtCQUFrQixnQkFBRUMsVUFBRixDQUFhcEcsbUJBQW1CaUcsVUFBbkIsRUFBK0JJLFNBQS9CLEVBQTBDQSxTQUExQyxRQUFiLENBQXhCO0FBQ0EsVUFBTUMsb0JBQW9CLGdCQUFFRixVQUFGLENBQWFuRyxxQkFBcUJnRyxVQUFyQixFQUFpQ0ksU0FBakMsRUFBNENBLFNBQTVDLFFBQWIsQ0FBMUI7QUFDQSxhQUNFO0FBQUMsc0JBQUQ7QUFBQTtBQUNFLHFCQUFXLDBCQUFXLGVBQVgsRUFBNEJGLGdCQUFnQnZHLFNBQTVDLENBRGI7QUFFRSw4QkFDS3VHLGdCQUFnQnRHLEtBRHJCO0FBRUVrRyxzQkFBYVYsV0FBYjtBQUZGO0FBRkYsV0FNTWMsZ0JBQWdCSSxJQU50QjtBQVFFO0FBQUMscUJBQUQ7QUFBQTtBQUNFLHVCQUFXRCxrQkFBa0IxRyxTQUQvQjtBQUVFLG1CQUFPMEcsa0JBQWtCekc7QUFGM0IsYUFHTXlHLGtCQUFrQkMsSUFIeEI7QUFLR2pELHVCQUFhaUMsR0FBYixDQUFpQmlCLGVBQWpCO0FBTEg7QUFSRixPQURGO0FBa0JELEtBckJEOztBQXVCQSxRQUFNQSxrQkFBa0IsU0FBbEJBLGVBQWtCLENBQUNDLE1BQUQsRUFBUzNCLENBQVQsRUFBZTtBQUNyQyxVQUFNNEIsT0FBTyxnQkFBRXBCLEdBQUYsQ0FBTW1CLE9BQU9FLE9BQVAsQ0FBZXBCLEdBQWYsQ0FBbUIsYUFBSztBQUN6QyxZQUFNQyxVQUFVeEQsU0FBU3lELElBQVQsQ0FBYztBQUFBLGlCQUFLQyxFQUFFQyxFQUFGLEtBQVNyQixFQUFFcUIsRUFBaEI7QUFBQSxTQUFkLEtBQXFDLEVBQXJEO0FBQ0EsZUFBT3JCLEVBQUV3QixLQUFGLElBQVdOLFFBQVFLLEtBQW5CLEdBQTJCLENBQTNCLEdBQStCdkIsRUFBRXlCLFFBQXhDO0FBQ0QsT0FIa0IsQ0FBTixDQUFiO0FBSUEsVUFBTUQsUUFBUSxnQkFBRVIsR0FBRixDQUFNbUIsT0FBT0UsT0FBUCxDQUFlcEIsR0FBZixDQUFtQixhQUFLO0FBQzFDLFlBQU1DLFVBQVV4RCxTQUFTeUQsSUFBVCxDQUFjO0FBQUEsaUJBQUtDLEVBQUVDLEVBQUYsS0FBU3JCLEVBQUVxQixFQUFoQjtBQUFBLFNBQWQsS0FBcUMsRUFBckQ7QUFDQSxlQUFPLGdCQUFFQyxlQUFGLENBQWtCSixRQUFRSyxLQUExQixFQUFpQ3ZCLEVBQUV3QixLQUFuQyxFQUEwQ3hCLEVBQUV5QixRQUE1QyxDQUFQO0FBQ0QsT0FIbUIsQ0FBTixDQUFkO0FBSUEsVUFBTWEsV0FBVyxnQkFBRXRCLEdBQUYsQ0FBTW1CLE9BQU9FLE9BQVAsQ0FBZXBCLEdBQWYsQ0FBbUIsYUFBSztBQUM3QyxZQUFNQyxVQUFVeEQsU0FBU3lELElBQVQsQ0FBYztBQUFBLGlCQUFLQyxFQUFFQyxFQUFGLEtBQVNyQixFQUFFcUIsRUFBaEI7QUFBQSxTQUFkLEtBQXFDLEVBQXJEO0FBQ0EsZUFBTyxnQkFBRUMsZUFBRixDQUFrQkosUUFBUUssS0FBMUIsRUFBaUN2QixFQUFFd0IsS0FBbkMsRUFBMEN4QixFQUFFc0MsUUFBNUMsQ0FBUDtBQUNELE9BSHNCLENBQU4sQ0FBakI7QUFJQSxVQUFNQyxvQkFBb0IsZ0JBQUVULFVBQUYsQ0FBYWxHLHFCQUFxQitGLFVBQXJCLEVBQWlDSSxTQUFqQyxFQUE0Q0ksTUFBNUMsUUFBYixDQUExQjtBQUNBLFVBQU1LLG9CQUFvQixnQkFBRVYsVUFBRixDQUFhSyxPQUFPTSxjQUFQLENBQXNCZCxVQUF0QixFQUFrQ0ksU0FBbEMsRUFBNkNJLE1BQTdDLFFBQWIsQ0FBMUI7O0FBRUEsVUFBTU8sVUFBVSxDQUNkUCxPQUFPUSxlQURPLEVBRWRKLGtCQUFrQmpILFNBRkosRUFHZGtILGtCQUFrQmxILFNBSEosQ0FBaEI7O0FBTUEsVUFBTXNILHNCQUNEVCxPQUFPVSxXQUROLEVBRUROLGtCQUFrQmhILEtBRmpCLEVBR0RpSCxrQkFBa0JqSCxLQUhqQixDQUFOOztBQU1BLFVBQU0wRyxvQkFDRE0sa0JBQWtCTixJQURqQixFQUVETyxrQkFBa0JQLElBRmpCLENBQU47O0FBS0EsVUFBTWEsYUFBYTtBQUNqQlYsY0FBU0EsSUFBVCxZQURpQjtBQUVqQlosZUFBVUEsS0FBVixPQUZpQjtBQUdqQmMsa0JBQWFBLFFBQWI7QUFIaUIsT0FBbkI7O0FBTUEsVUFBSUgsT0FBT1ksUUFBWCxFQUFxQjtBQUNuQixZQUFJWixPQUFPYSxZQUFYLEVBQXlCO0FBQ3ZCLGlCQUNFLDhCQUFDLFdBQUQ7QUFDRSxpQkFBS3hDLENBRFA7QUFFRSx1QkFBVywwQkFDVCxpQkFEUyxFQUVUa0MsT0FGUyxDQUZiO0FBTUUsZ0NBQ0tFLE1BREwsRUFFS0UsVUFGTDtBQU5GLGFBVU1iLElBVk4sRUFERjtBQWNEO0FBQ0QsZUFDRSw4QkFBQyxXQUFEO0FBQ0UsZUFBS3pCLENBRFA7QUFFRSxxQkFBVywwQkFDVCxvQkFEUyxFQUVUa0MsT0FGUyxDQUZiO0FBTUUsOEJBQ0tFLE1BREw7QUFFRVIsNEJBRkY7QUFHRVosbUJBQVV6RSxtQkFBVjtBQUhGO0FBTkYsV0FXTWtGLElBWE4sRUFERjtBQWVEO0FBQ0QsYUFDRTtBQUFDLG1CQUFEO0FBQUE7QUFDRSxlQUFLekIsQ0FEUDtBQUVFLHFCQUFXLDBCQUNUa0MsT0FEUyxDQUZiO0FBS0UsOEJBQ0tFLE1BREwsRUFFS0UsVUFGTDtBQUxGLFdBU01iLElBVE47QUFXRyx3QkFBRWdCLGtCQUFGLENBQXFCZCxPQUFPZSxNQUE1QixFQUFvQztBQUNuQ0MsZ0JBQU1qRSxVQUQ2QjtBQUVuQ2lELGtCQUFRQTtBQUYyQixTQUFwQztBQVhILE9BREY7QUFrQkQsS0ExRkQ7O0FBNEZBLFFBQU1pQixjQUFjLFNBQWRBLFdBQWMsR0FBTTtBQUN4QixVQUFNQyxhQUFhLGdCQUFFdkIsVUFBRixDQUFhakcsY0FBYzhGLFVBQWQsRUFBMEJJLFNBQTFCLEVBQXFDQSxTQUFyQyxRQUFiLENBQW5CO0FBQ0EsVUFBTXVCLGVBQWUsZ0JBQUV4QixVQUFGLENBQWFoRyxnQkFBZ0I2RixVQUFoQixFQUE0QkksU0FBNUIsRUFBdUNBLFNBQXZDLFFBQWIsQ0FBckI7QUFDQSxhQUNFO0FBQUMsc0JBQUQ7QUFBQTtBQUNFLHFCQUFXLDBCQUFXLFNBQVgsRUFBc0JzQixXQUFXL0gsU0FBakMsQ0FEYjtBQUVFLDhCQUNLK0gsV0FBVzlILEtBRGhCO0FBRUVrRyxzQkFBYVYsV0FBYjtBQUZGO0FBRkYsV0FNTXNDLFdBQVdwQixJQU5qQjtBQVFFO0FBQUMscUJBQUQ7QUFBQTtBQUNFLHVCQUFXcUIsYUFBYWhJLFNBRDFCO0FBRUUsbUJBQU9nSSxhQUFhL0g7QUFGdEIsYUFHTStILGFBQWFyQixJQUhuQjtBQUtHbEQsNEJBQWtCa0MsR0FBbEIsQ0FBc0JzQyxVQUF0QjtBQUxIO0FBUkYsT0FERjtBQWtCRCxLQXJCRDs7QUF1QkEsUUFBTUEsYUFBYSxTQUFiQSxVQUFhLENBQUNwQixNQUFELEVBQVMzQixDQUFULEVBQWU7QUFDaEMsVUFBTVUsVUFBVXhELFNBQVN5RCxJQUFULENBQWM7QUFBQSxlQUFLQyxFQUFFQyxFQUFGLEtBQVNjLE9BQU9kLEVBQXJCO0FBQUEsT0FBZCxLQUEwQyxFQUExRDtBQUNBLFVBQU1tQyxPQUFPaEcsUUFBUTJELElBQVIsQ0FBYTtBQUFBLGVBQUtuQixFQUFFcUIsRUFBRixLQUFTYyxPQUFPZCxFQUFyQjtBQUFBLE9BQWIsQ0FBYjtBQUNBLFVBQU1vQyxPQUFPLE9BQU90QixPQUFPc0IsSUFBZCxLQUF1QixVQUF2QixHQUFvQ3RCLE9BQU9zQixJQUFQLEVBQXBDLEdBQW9EdEIsT0FBT3NCLElBQXhFO0FBQ0EsVUFBTWpDLFFBQVEsZ0JBQUVGLGVBQUYsQ0FBa0JKLFFBQVFLLEtBQTFCLEVBQWlDWSxPQUFPWCxLQUF4QyxFQUErQ1csT0FBT1YsUUFBdEQsQ0FBZDtBQUNBLFVBQU1hLFdBQVcsZ0JBQUVoQixlQUFGLENBQWtCSixRQUFRSyxLQUExQixFQUFpQ1ksT0FBT1gsS0FBeEMsRUFBK0NXLE9BQU9HLFFBQXRELENBQWpCO0FBQ0EsVUFBTW9CLGVBQWUsZ0JBQUU1QixVQUFGLENBQWEvRixnQkFBZ0I0RixVQUFoQixFQUE0QkksU0FBNUIsRUFBdUNJLE1BQXZDLFFBQWIsQ0FBckI7QUFDQSxVQUFNSyxvQkFBb0IsZ0JBQUVWLFVBQUYsQ0FBYUssT0FBT00sY0FBUCxDQUFzQmQsVUFBdEIsRUFBa0NJLFNBQWxDLEVBQTZDSSxNQUE3QyxRQUFiLENBQTFCOztBQUVBLFVBQU1PLFVBQVUsQ0FDZFAsT0FBT1EsZUFETyxFQUVkZSxhQUFhcEksU0FGQyxFQUdka0gsa0JBQWtCbEgsU0FISixDQUFoQjs7QUFNQSxVQUFNc0gsc0JBQ0RULE9BQU9VLFdBRE4sRUFFRGEsYUFBYW5JLEtBRlosRUFHRGlILGtCQUFrQmpILEtBSGpCLENBQU47O0FBTUEsVUFBTTBHLG9CQUNEeUIsYUFBYXpCLElBRFosRUFFRE8sa0JBQWtCUCxJQUZqQixDQUFOOztBQUtBLFVBQU0wQixVQUFVdkcsWUFDZCw4QkFBQyxnQkFBRDtBQUNFLHFCQUFhO0FBQUEsaUJBQUssTUFBS3dHLGlCQUFMLENBQXVCekIsTUFBdkIsRUFBK0IwQixDQUEvQixFQUFrQyxLQUFsQyxDQUFMO0FBQUEsU0FEZjtBQUVFLHNCQUFjO0FBQUEsaUJBQUssTUFBS0QsaUJBQUwsQ0FBdUJ6QixNQUF2QixFQUErQjBCLENBQS9CLEVBQWtDLElBQWxDLENBQUw7QUFBQTtBQUZoQixTQUdNQyxZQUhOLEVBRGMsR0FNWixJQU5KOztBQVFBLFVBQUkzQixPQUFPWSxRQUFYLEVBQXFCO0FBQ25CLFlBQUlaLE9BQU9hLFlBQVgsRUFBeUI7QUFDdkIsY0FBTWUsWUFBWXZHLFFBQVEyRCxJQUFSLENBQWE7QUFBQSxtQkFBS25CLEVBQUVxQixFQUFGLEtBQVNjLE9BQU9kLEVBQXJCO0FBQUEsV0FBYixDQUFsQjtBQUNBLGlCQUNFO0FBQUMsdUJBQUQ7QUFBQTtBQUNFLG1CQUFLYixDQURQO0FBRUUseUJBQVcsMEJBQ1QsaUJBRFMsRUFFVCxxQkFGUyxFQUdUMkIsT0FBTzZCLFFBQVAsSUFBbUIsaUJBSFYsRUFJVHRCLE9BSlMsRUFLVHFCLFlBQWFBLFVBQVVFLElBQVYsR0FBaUIsWUFBakIsR0FBZ0MsV0FBN0MsR0FBNEQsRUFMbkQsQ0FGYjtBQVNFLGtDQUNLckIsTUFETDtBQUVFUixzQkFBU1osS0FBVCxZQUZGO0FBR0VBLHVCQUFVQSxLQUFWLE9BSEY7QUFJRWMsMEJBQWFBLFFBQWI7QUFKRixnQkFURjtBQWVFLDBCQUFZLG9CQUFDdUIsQ0FBRCxFQUFPO0FBQ2pCMUIsdUJBQU82QixRQUFQLElBQW1CLE1BQUtFLFVBQUwsQ0FBZ0IvQixPQUFPYSxZQUF2QixFQUFxQ2EsRUFBRU0sUUFBdkMsQ0FBbkI7QUFDRDtBQWpCSCxlQWtCTWxDLElBbEJOO0FBb0JFO0FBQUE7QUFBQSxnQkFBSyxXQUFVLDZCQUFmO0FBQ0dFLHFCQUFPYSxZQUFQLENBQW9CL0IsR0FBcEIsQ0FBd0IsVUFBQ21ELFdBQUQsRUFBYzVELENBQWQsRUFBb0I7QUFDM0MsdUJBQ0U7QUFBQTtBQUFBLG9CQUFNLEtBQUs0RCxZQUFZL0MsRUFBdkI7QUFDRyxrQ0FBRTRCLGtCQUFGLENBQXFCbUIsWUFBWWxCLE1BQWpDLEVBQXlDO0FBQ3hDQywwQkFBTWpFLFVBRGtDO0FBRXhDaUQsNEJBQVFBO0FBRmdDLG1CQUF6QyxDQURIO0FBS0czQixzQkFBSTJCLE9BQU9hLFlBQVAsQ0FBb0JuRCxNQUFwQixHQUE2QixDQUFqQyxJQUNDLDhCQUFDLGlCQUFEO0FBTkosaUJBREY7QUFXRCxlQVpBO0FBREgsYUFwQkY7QUFtQ0c4RDtBQW5DSCxXQURGO0FBdUNEO0FBQ0QsZUFDRSw4QkFBQyxXQUFEO0FBQ0UsZUFBS25ELENBRFA7QUFFRSxxQkFBVywwQkFDVCxvQkFEUyxFQUVUa0MsT0FGUyxDQUZiO0FBTUUsOEJBQ0tFLE1BREw7QUFFRVIsNEJBRkY7QUFHRVosbUJBQVV6RSxtQkFBVjtBQUhGO0FBTkYsV0FXTWtGLElBWE4sRUFERjtBQWVEOztBQUVELGFBQ0U7QUFBQyxtQkFBRDtBQUFBO0FBQ0UsZUFBS3pCLENBRFA7QUFFRSxxQkFBVywwQkFDVGtDLE9BRFMsRUFFVCxxQkFGUyxFQUdUYyxPQUFRQSxLQUFLUyxJQUFMLEdBQVksWUFBWixHQUEyQixXQUFuQyxHQUFrRCxFQUh6QyxFQUlUOUIsT0FBTzZCLFFBQVAsSUFBbUIsaUJBSlYsRUFLVCxDQUFDUCxJQUFELElBQVMsU0FMQSxDQUZiO0FBU0UsOEJBQ0tiLE1BREw7QUFFRVIsa0JBQVNaLEtBQVQsWUFGRjtBQUdFQSxtQkFBVUEsS0FBVixPQUhGO0FBSUVjLHNCQUFhQSxRQUFiO0FBSkYsWUFURjtBQWVFLHNCQUFZLG9CQUFDdUIsQ0FBRCxFQUFPO0FBQ2pCMUIsbUJBQU82QixRQUFQLElBQW1CLE1BQUtFLFVBQUwsQ0FBZ0IvQixNQUFoQixFQUF3QjBCLEVBQUVNLFFBQTFCLENBQW5CO0FBQ0Q7QUFqQkgsV0FrQk1sQyxJQWxCTjtBQW9CRTtBQUFBO0FBQUEsWUFBSyxXQUFVLDZCQUFmO0FBQ0csMEJBQUVnQixrQkFBRixDQUFxQmQsT0FBT2UsTUFBNUIsRUFBb0M7QUFDbkNDLGtCQUFNakUsVUFENkI7QUFFbkNpRCxvQkFBUUE7QUFGMkIsV0FBcEM7QUFESCxTQXBCRjtBQTBCR3dCO0FBMUJILE9BREY7QUE4QkQsS0E1SEQ7O0FBOEhBLFFBQU1VLGNBQWMsU0FBZEEsV0FBYyxHQUFNO0FBQ3hCLFVBQU1DLG1CQUFtQixnQkFBRXhDLFVBQUYsQ0FBYTlGLG9CQUFvQjJGLFVBQXBCLEVBQWdDSSxTQUFoQyxFQUEyQ0EsU0FBM0MsUUFBYixDQUF6QjtBQUNBLFVBQU13QyxxQkFBcUIsZ0JBQUV6QyxVQUFGLENBQWE3RixzQkFBc0IwRixVQUF0QixFQUFrQ0ksU0FBbEMsRUFBNkNBLFNBQTdDLFFBQWIsQ0FBM0I7QUFDQSxhQUNFO0FBQUMsc0JBQUQ7QUFBQTtBQUNFLHFCQUFXLDBCQUFXLFVBQVgsRUFBdUJ1QyxpQkFBaUJoSixTQUF4QyxDQURiO0FBRUUsOEJBQ0tnSixpQkFBaUIvSSxLQUR0QjtBQUVFa0csc0JBQWFWLFdBQWI7QUFGRjtBQUZGLFdBTU11RCxpQkFBaUJyQyxJQU52QjtBQVFFO0FBQUMscUJBQUQ7QUFBQTtBQUNFLHVCQUFXc0MsbUJBQW1CakosU0FEaEM7QUFFRSxtQkFBT2lKLG1CQUFtQmhKO0FBRjVCLGFBR01nSixtQkFBbUJ0QyxJQUh6QjtBQUtHbEQsNEJBQWtCa0MsR0FBbEIsQ0FBc0J1RCxVQUF0QjtBQUxIO0FBUkYsT0FERjtBQWtCRCxLQXJCRDs7QUF1QkEsUUFBTUEsYUFBYSxTQUFiQSxVQUFhLENBQUNyQyxNQUFELEVBQVMzQixDQUFULEVBQWU7QUFDaEMsVUFBTVUsVUFBVXhELFNBQVN5RCxJQUFULENBQWM7QUFBQSxlQUFLQyxFQUFFQyxFQUFGLEtBQVNjLE9BQU9kLEVBQXJCO0FBQUEsT0FBZCxLQUEwQyxFQUExRDtBQUNBLFVBQU1HLFFBQVEsZ0JBQUVGLGVBQUYsQ0FBa0JKLFFBQVFLLEtBQTFCLEVBQWlDWSxPQUFPWCxLQUF4QyxFQUErQ1csT0FBT1YsUUFBdEQsQ0FBZDtBQUNBLFVBQU1hLFdBQVcsZ0JBQUVoQixlQUFGLENBQWtCSixRQUFRSyxLQUExQixFQUFpQ1ksT0FBT1gsS0FBeEMsRUFBK0NXLE9BQU9HLFFBQXRELENBQWpCO0FBQ0EsVUFBTW1DLHFCQUFxQixnQkFBRTNDLFVBQUYsQ0FBYTVGLHNCQUFzQnlGLFVBQXRCLEVBQWtDSSxTQUFsQyxFQUE2Q0ksTUFBN0MsUUFBYixDQUEzQjtBQUNBLFVBQU1LLG9CQUFvQixnQkFBRVYsVUFBRixDQUFhSyxPQUFPTSxjQUFQLENBQXNCZCxVQUF0QixFQUFrQ0ksU0FBbEMsRUFBNkNJLE1BQTdDLFFBQWIsQ0FBMUI7O0FBRUEsVUFBTU8sVUFBVSxDQUNkUCxPQUFPUSxlQURPLEVBRWQ4QixtQkFBbUJuSixTQUZMLEVBR2RrSCxrQkFBa0JsSCxTQUhKLENBQWhCOztBQU1BLFVBQU1zSCxzQkFDRFQsT0FBT1UsV0FETixFQUVENEIsbUJBQW1CbEosS0FGbEIsRUFHRGlILGtCQUFrQmpILEtBSGpCLENBQU47O0FBTUEsVUFBTTBHLG9CQUNEd0MsbUJBQW1CeEMsSUFEbEIsRUFFRE8sa0JBQWtCUCxJQUZqQixDQUFOOztBQUtBLFVBQUlFLE9BQU9ZLFFBQVgsRUFBcUI7QUFDbkIsWUFBSVosT0FBT2EsWUFBWCxFQUF5QjtBQUN2QixjQUFNMEIsWUFBWSxFQUFsQjs7QUFEdUIscUNBRWRsRSxFQUZjO0FBR3JCLGdCQUFNbUUsTUFBTXhDLE9BQU9hLFlBQVAsQ0FBb0J4QyxFQUFwQixDQUFaO0FBQ0EsZ0JBQU1vRSxTQUFTbkgsVUFBVTBELElBQVYsQ0FBZTtBQUFBLHFCQUFVeUQsT0FBT3ZELEVBQVAsS0FBY2MsT0FBT2QsRUFBckIsSUFBMkJ1RCxPQUFPQyxPQUFQLEtBQW1CRixJQUFJdEQsRUFBNUQ7QUFBQSxhQUFmLENBQWY7QUFDQXFELHNCQUFVSSxJQUFWLENBQ0U7QUFBQTtBQUFBLGdCQUFNLEtBQUtILElBQUl0RCxFQUFmO0FBQ0UsdUJBQU8sRUFBQ2UsTUFBTSxDQUFQLEVBRFQ7QUFFRyxlQUFDdUMsSUFBSUksVUFBTCxHQUNDLGdCQUFFOUIsa0JBQUYsQ0FBcUIwQixJQUFJSyxZQUF6QixFQUNFO0FBQ0VMLHdCQURGO0FBRUVDLDhCQUZGO0FBR0VLLGdDQUFnQix3QkFBQzFELEtBQUQ7QUFBQSx5QkFBWSxNQUFLMkQsWUFBTCxDQUFrQi9DLE1BQWxCLEVBQTBCWixLQUExQixFQUFpQ29ELEdBQWpDLENBQVo7QUFBQTtBQUhsQixlQURGLEVBTUUsdUJBQVN4QyxNQUFULENBQWdCNkMsWUFObEIsQ0FERCxHQVNHO0FBWE4sYUFERjtBQWVBLGdCQUFJeEUsS0FBSTJCLE9BQU9hLFlBQVAsQ0FBb0JuRCxNQUFwQixHQUE2QixDQUFyQyxFQUF3QztBQUN0QzZFLHdCQUFVSSxJQUFWLENBQWUsOEJBQUMsaUJBQUQsSUFBbUIsS0FBS0gsSUFBSXRELEVBQUosR0FBUyxHQUFULEdBQWViLEVBQXZDLEdBQWY7QUFDRDtBQXRCb0I7O0FBRXZCLGVBQUssSUFBSUEsS0FBSSxDQUFiLEVBQWdCQSxLQUFJMkIsT0FBT2EsWUFBUCxDQUFvQm5ELE1BQXhDLEVBQWdEVyxJQUFoRCxFQUFxRDtBQUFBLGtCQUE1Q0EsRUFBNEM7QUFxQnBEO0FBQ0QsaUJBQ0U7QUFBQyx1QkFBRDtBQUFBO0FBQ0UsbUJBQUtBLENBRFA7QUFFRSx5QkFBVywwQkFDVCxpQkFEUyxFQUVUMkIsT0FBTzZCLFFBQVAsSUFBbUIsaUJBRlYsRUFHVHRCLE9BSFMsQ0FGYjtBQU9FLGtDQUNLRSxNQURMO0FBRUVSLHNCQUFTWixLQUFULFlBRkY7QUFHRUEsdUJBQVVBLEtBQVYsT0FIRjtBQUlFYywwQkFBYUEsUUFBYixPQUpGO0FBS0U2Qyx5QkFBUztBQUxYO0FBUEYsZUFjTWxELElBZE47QUFnQkd5QztBQWhCSCxXQURGO0FBb0JEO0FBQ0QsZUFDRSw4QkFBQyxXQUFEO0FBQ0UsZUFBS2xFLENBRFA7QUFFRSxxQkFBVywwQkFDVCxvQkFEUyxFQUVUa0MsT0FGUyxDQUZiO0FBTUUsOEJBQ0tFLE1BREw7QUFFRVIsNEJBRkY7QUFHRVosbUJBQVV6RSxtQkFBVjtBQUhGO0FBTkYsV0FXTWtGLElBWE4sRUFERjtBQWVEOztBQUVELFVBQU0yQyxTQUFTbkgsVUFBVTBELElBQVYsQ0FBZTtBQUFBLGVBQVV5RCxPQUFPdkQsRUFBUCxLQUFjYyxPQUFPZCxFQUEvQjtBQUFBLE9BQWYsQ0FBZjs7QUFFQSxhQUNFO0FBQUMsbUJBQUQ7QUFBQTtBQUNFLGVBQUtiLENBRFA7QUFFRSxxQkFBVywwQkFDVGtDLE9BRFMsQ0FGYjtBQUtFLDhCQUNLRSxNQURMO0FBRUVSLGtCQUFTWixLQUFULFlBRkY7QUFHRUEsbUJBQVVBLEtBQVYsT0FIRjtBQUlFYyxzQkFBYUEsUUFBYjtBQUpGO0FBTEYsV0FXTUwsSUFYTjtBQWFHLFNBQUNFLE9BQU80QyxVQUFSLEdBQ0MsZ0JBQUU5QixrQkFBRixDQUFxQmQsT0FBTzZDLFlBQTVCLEVBQ0U7QUFDRTdDLHdCQURGO0FBRUV5Qyx3QkFGRjtBQUdFSywwQkFBZ0Isd0JBQUMxRCxLQUFEO0FBQUEsbUJBQVksTUFBSzJELFlBQUwsQ0FBa0IvQyxNQUFsQixFQUEwQlosS0FBMUIsQ0FBWjtBQUFBO0FBSGxCLFNBREYsRUFNRSx1QkFBU1ksTUFBVCxDQUFnQjZDLFlBTmxCLENBREQsR0FTRztBQXRCTixPQURGO0FBMEJELEtBbkhEOztBQXFIQSxRQUFNSSxjQUFjLFNBQWRBLFdBQWMsQ0FBQzdFLEdBQUQsRUFBTUMsQ0FBTixFQUF1QjtBQUFBLFVBQWRKLElBQWMsdUVBQVAsRUFBTzs7QUFDekMsVUFBTWlGLFVBQVU7QUFDZDlFLGFBQUtBLElBQUkrRSxVQURLO0FBRWRDLG1CQUFXaEYsR0FGRztBQUdkRixlQUFPRSxJQUFJaUYsT0FIRztBQUlkQyxtQkFBVyxFQUFFL0QsUUFKQztBQUtkZ0UsZUFBT3RGLEtBQUtQLE1BTEU7QUFNZDhGLHFCQUFhdkYsS0FBS08sTUFBTCxDQUFZLENBQUNILENBQUQsQ0FBWixDQU5DO0FBT2RvRixvQkFBWSxDQUFDLENBQUNyRixJQUFJMUMsVUFBSixDQVBBO0FBUWRnSSxpQkFBU3RGLElBQUkxQyxVQUFKO0FBUkssT0FBaEI7QUFVQSxVQUFNaUksYUFBYSxnQkFBRWxGLEdBQUYsQ0FBTTlDLFlBQU4sRUFBb0J1SCxRQUFRTSxXQUE1QixDQUFuQjtBQUNBLFVBQU1JLGVBQWUzSixnQkFBZ0J1RixVQUFoQixFQUE0QjBELE9BQTVCLEVBQXFDdEQsU0FBckMsUUFBckI7QUFDQSxVQUFNaUUsVUFBVSxnQkFBRWxFLFVBQUYsQ0FBYXpGLFdBQVdzRixVQUFYLEVBQXVCMEQsT0FBdkIsRUFBZ0N0RCxTQUFoQyxRQUFiLENBQWhCO0FBQ0EsYUFDRTtBQUFDLHdCQUFEO0FBQUE7QUFDRSxlQUFLc0QsUUFBUU0sV0FBUixDQUFvQk0sSUFBcEIsQ0FBeUIsR0FBekI7QUFEUCxXQUVNRixZQUZOO0FBSUU7QUFBQyxxQkFBRDtBQUFBO0FBQ0UsdUJBQVcsMEJBQ1RDLFFBQVExSyxTQURDLEVBRVRpRixJQUFJRSxVQUFKLEdBQWlCLENBQWpCLEdBQXFCLE9BQXJCLEdBQStCLE1BRnRCLENBRGI7QUFLRSxtQkFBT3VGLFFBQVF6SztBQUxqQixhQU1NeUssUUFBUS9ELElBTmQ7QUFRR2xELDRCQUFrQmtDLEdBQWxCLENBQXNCLFVBQUNrQixNQUFELEVBQVMrRCxFQUFULEVBQWdCO0FBQ3JDLGdCQUFNaEYsVUFBVXhELFNBQVN5RCxJQUFULENBQWM7QUFBQSxxQkFBS0MsRUFBRUMsRUFBRixLQUFTYyxPQUFPZCxFQUFyQjtBQUFBLGFBQWQsS0FBMEMsRUFBMUQ7QUFDQSxnQkFBTW9DLE9BQU8sT0FBT3RCLE9BQU9zQixJQUFkLEtBQXVCLFVBQXZCLEdBQW9DdEIsT0FBT3NCLElBQVAsRUFBcEMsR0FBb0R0QixPQUFPc0IsSUFBeEU7QUFDQSxnQkFBTWpDLFFBQVEsZ0JBQUVGLGVBQUYsQ0FBa0JKLFFBQVFLLEtBQTFCLEVBQWlDWSxPQUFPWCxLQUF4QyxFQUErQ1csT0FBT1YsUUFBdEQsQ0FBZDtBQUNBLGdCQUFNYSxXQUFXLGdCQUFFaEIsZUFBRixDQUFrQkosUUFBUUssS0FBMUIsRUFBaUNZLE9BQU9YLEtBQXhDLEVBQStDVyxPQUFPRyxRQUF0RCxDQUFqQjtBQUNBLGdCQUFNNkQsVUFBVSxnQkFBRXJFLFVBQUYsQ0FBYXhGLFdBQVdxRixVQUFYLEVBQXVCMEQsT0FBdkIsRUFBZ0NsRCxNQUFoQyxRQUFiLENBQWhCO0FBQ0EsZ0JBQU1pRSxjQUFjLGdCQUFFdEUsVUFBRixDQUFhSyxPQUFPM0csUUFBUCxDQUFnQm1HLFVBQWhCLEVBQTRCMEQsT0FBNUIsRUFBcUNsRCxNQUFyQyxRQUFiLENBQXBCOztBQUVBLGdCQUFNTyxVQUFVLENBQ2R5RCxRQUFRN0ssU0FETSxFQUVkNkcsT0FBTzdHLFNBRk8sRUFHZDhLLFlBQVk5SyxTQUhFLENBQWhCOztBQU1BLGdCQUFNc0gsc0JBQ0R1RCxRQUFRNUssS0FEUCxFQUVENEcsT0FBTzVHLEtBRk4sRUFHRDZLLFlBQVk3SyxLQUhYLENBQU47O0FBTUEsZ0JBQUk0RyxPQUFPWSxRQUFYLEVBQXFCO0FBQ25CLGtCQUFNc0QsWUFBWSxTQUFaQSxTQUFZLENBQUN4QyxDQUFELEVBQU87QUFDdkIsb0JBQUk5RixXQUFKLEVBQWlCO0FBQ2YseUJBQU9BLFlBQVlzSCxRQUFRTSxXQUFwQixFQUFpQzlCLENBQWpDLENBQVA7QUFDRDtBQUNELG9CQUFJeUMsa0JBQWtCLGdCQUFFQyxLQUFGLENBQVF6SSxZQUFSLENBQXRCO0FBQ0Esb0JBQUlnSSxVQUFKLEVBQWdCO0FBQ2QseUJBQU8sTUFBS1UsZ0JBQUwsQ0FBc0I7QUFDM0IxSSxrQ0FBYyxnQkFBRTJJLEdBQUYsQ0FBTUgsZUFBTixFQUF1QmpCLFFBQVFNLFdBQS9CLEVBQTRDLEtBQTVDO0FBRGEsbUJBQXRCLENBQVA7QUFHRDtBQUNELHVCQUFPLE1BQUthLGdCQUFMLENBQXNCO0FBQzNCMUksZ0NBQWMsZ0JBQUUySSxHQUFGLENBQU1ILGVBQU4sRUFBdUJqQixRQUFRTSxXQUEvQixFQUE0QyxFQUE1QztBQURhLGlCQUF0QixDQUFQO0FBR0QsZUFiRDs7QUFlQSxrQkFBSXhELE9BQU9hLFlBQVgsRUFBeUI7QUFDdkI7QUFDQSxvQkFBTTBELFlBQVl2RSxPQUFPd0UsV0FBekI7QUFDQSx1QkFDRTtBQUFDLDZCQUFEO0FBQUE7QUFDRSx5QkFBS1QsRUFEUDtBQUVFLCtCQUFXLDBCQUNULFVBRFMsRUFFVHhELE9BRlMsQ0FGYjtBQU1FLHdDQUNLRSxNQURMO0FBRUVnRSxtQ0FBYXZCLFFBQVFNLFdBQVIsQ0FBb0I5RixNQUFwQixLQUErQixDQUEvQixHQUFtQ2tDLFNBQW5DLEdBQWtELE1BQU1zRCxRQUFRTSxXQUFSLENBQW9COUYsTUFBcEIsR0FBNkIsQ0FBbkMsQ0FBbEQsT0FGZjtBQUdFdUMsNEJBQVNaLEtBQVQsWUFIRjtBQUlFQSw2QkFBVUEsS0FBVixPQUpGO0FBS0VjLGdDQUFhQSxRQUFiO0FBTEY7QUFORixxQkFhTTZELFFBQVFsRSxJQWJkO0FBY0UsNkJBQVNvRTtBQWRYO0FBZ0JHaEIsMEJBQVFRLE9BQVIsR0FDQztBQUFBO0FBQUE7QUFDRSxrREFBQyxpQkFBRDtBQUNFLGtDQUFZQztBQURkLHNCQURGO0FBSUczRCw4QkFBVUEsT0FBT3dFLFdBQWpCLEdBQ0MsOEJBQUMsU0FBRCxlQUNNdEIsT0FETjtBQUVFLDZCQUFPQSxRQUFRRSxTQUFSLENBQWtCM0gsV0FBbEI7QUFGVCx1QkFERCxHQUtHO0FBQUE7QUFBQTtBQUFPMkMsMEJBQUkzQyxXQUFKLENBQVA7QUFBQTtBQUEyQnlILDhCQUFRUSxPQUFSLENBQWdCaEcsTUFBM0M7QUFBQTtBQUFBO0FBVE4sbUJBREQsR0FZR2xCLGVBQ0Y7QUFBQTtBQUFBO0FBQ0Usa0RBQUMsaUJBQUQ7QUFDRSxrQ0FBWW1IO0FBRGQ7QUFERixtQkFERSxHQU1BO0FBbENOLGlCQURGO0FBc0NEOztBQUVEO0FBQ0EscUJBQ0U7QUFBQywyQkFBRDtBQUFBO0FBQ0UsdUJBQUtJLEVBRFA7QUFFRSw2QkFBVywwQkFDVHhELE9BRFMsRUFFVCxFQUFDbUUsUUFBUSxDQUFDcEQsSUFBVixFQUZTLENBRmI7QUFNRSxzQ0FDS2IsTUFETDtBQUVFUixvQ0FGRjtBQUdFWiwyQkFBVXpFLG1CQUFWO0FBSEYsb0JBTkY7QUFXRSwyQkFBU3NKO0FBWFg7QUFhRTtBQUFBO0FBQUE7QUFDRSxnREFBQyxpQkFBRDtBQUNFLGdDQUFZUDtBQURkO0FBREY7QUFiRixlQURGO0FBcUJEOztBQUVEO0FBQ0EsbUJBQ0U7QUFBQyx5QkFBRDtBQUFBO0FBQ0UscUJBQUtJLEVBRFA7QUFFRSwyQkFBVywwQkFDVHhELE9BRFMsRUFFVCxDQUFDZSxJQUFELElBQVMsUUFGQSxDQUZiO0FBTUUsb0NBQ0tiLE1BREw7QUFFRVIsd0JBQVNaLEtBQVQsWUFGRjtBQUdFQSx5QkFBVUEsS0FBVixPQUhGO0FBSUVjLDRCQUFhQSxRQUFiO0FBSkY7QUFORixpQkFZTTZELFFBQVFsRSxJQVpkO0FBY0csOEJBQUVnQixrQkFBRixDQUFxQmQsT0FBT2pILE1BQTVCLGVBQ0ltSyxPQURKO0FBRUM5RCx1QkFBTzhELFFBQVFFLFNBQVIsQ0FBa0JwRCxPQUFPZCxFQUF6QjtBQUZSLGtCQUdFZ0UsUUFBUUUsU0FBUixDQUFrQnBELE9BQU9kLEVBQXpCLENBSEY7QUFkSCxhQURGO0FBcUJELFdBN0hBO0FBUkgsU0FKRjtBQTRJSWdFLGdCQUFRUSxPQUFSLElBQ0FDLFVBREEsSUFFQVQsUUFBUVEsT0FBUixDQUFnQjVFLEdBQWhCLENBQW9CLFVBQUNqQixDQUFELEVBQUlRLENBQUo7QUFBQSxpQkFBVTRFLFlBQVlwRixDQUFaLEVBQWVRLENBQWYsRUFBa0I2RSxRQUFRTSxXQUExQixDQUFWO0FBQUEsU0FBcEIsQ0E5SUo7QUFnSkdoSCx3QkFBZ0IsQ0FBQzBHLFFBQVFRLE9BQXpCLElBQW9DQyxVQUFwQyxJQUFrRG5ILGFBQWEwRyxPQUFiO0FBaEpyRCxPQURGO0FBb0pELEtBbEtEOztBQW9LQSxRQUFNeUIsYUFBYSxTQUFiQSxVQUFhLENBQUN2RyxHQUFELEVBQU1DLENBQU4sRUFBWTtBQUM3QixVQUFNdUYsZUFBZTNKLGdCQUFnQnVGLFVBQWhCLEVBQTRCSSxTQUE1QixFQUF1Q0EsU0FBdkMsUUFBckI7QUFDQSxVQUFNaUUsVUFBVSxnQkFBRWxFLFVBQUYsQ0FBYXpGLFdBQVdzRixVQUFYLEVBQXVCSSxTQUF2QixFQUFrQ0EsU0FBbEMsUUFBYixDQUFoQjtBQUNBLGFBQ0U7QUFBQyx3QkFBRDtBQUFBO0FBQ0UsZUFBS3ZCO0FBRFAsV0FFTXVGLFlBRk47QUFJRTtBQUFDLHFCQUFEO0FBQUE7QUFDRSx1QkFBVywwQkFDVCxTQURTLEVBRVRDLFFBQVExSyxTQUZDLENBRGI7QUFLRSxtQkFBTzBLLFFBQVF6SyxLQUFSLElBQWlCO0FBTDFCO0FBT0d3RCw0QkFBa0JrQyxHQUFsQixDQUFzQixVQUFDa0IsTUFBRCxFQUFTK0QsRUFBVCxFQUFnQjtBQUNyQyxnQkFBTWhGLFVBQVV4RCxTQUFTeUQsSUFBVCxDQUFjO0FBQUEscUJBQUtDLEVBQUVDLEVBQUYsS0FBU2MsT0FBT2QsRUFBckI7QUFBQSxhQUFkLEtBQTBDLEVBQTFEO0FBQ0EsZ0JBQU1vQyxPQUFPLE9BQU90QixPQUFPc0IsSUFBZCxLQUF1QixVQUF2QixHQUFvQ3RCLE9BQU9zQixJQUFQLEVBQXBDLEdBQW9EdEIsT0FBT3NCLElBQXhFO0FBQ0EsZ0JBQU1qQyxRQUFRLGdCQUFFRixlQUFGLENBQWtCSixRQUFRSyxLQUExQixFQUFpQ1ksT0FBT1gsS0FBeEMsRUFBK0NXLE9BQU9WLFFBQXRELENBQWQ7QUFDQSxnQkFBTWEsV0FBVyxnQkFBRWhCLGVBQUYsQ0FBa0JKLFFBQVFLLEtBQTFCLEVBQWlDWSxPQUFPWCxLQUF4QyxFQUErQ1csT0FBT0csUUFBdEQsQ0FBakI7QUFDQSxnQkFBTTZELFVBQVUsZ0JBQUVyRSxVQUFGLENBQWF4RixXQUFXcUYsVUFBWCxFQUF1QkksU0FBdkIsRUFBa0NJLE1BQWxDLFFBQWIsQ0FBaEI7QUFDQSxnQkFBTWlFLGNBQWMsZ0JBQUV0RSxVQUFGLENBQWFLLE9BQU8zRyxRQUFQLENBQWdCbUcsVUFBaEIsRUFBNEJJLFNBQTVCLEVBQXVDSSxNQUF2QyxRQUFiLENBQXBCOztBQUVBLGdCQUFNTyxVQUFVLENBQ2R5RCxRQUFRN0ssU0FETSxFQUVkNkcsT0FBTzdHLFNBRk8sRUFHZDhLLFlBQVk5SyxTQUhFLENBQWhCOztBQU1BLGdCQUFNc0gsc0JBQ0R1RCxRQUFRNUssS0FEUCxFQUVENEcsT0FBTzVHLEtBRk4sRUFHRDZLLFlBQVk3SyxLQUhYLENBQU47O0FBTUEsbUJBQ0U7QUFBQyx5QkFBRDtBQUFBO0FBQ0UscUJBQUsySyxFQURQO0FBRUUsMkJBQVcsMEJBQ1R4RCxPQURTLEVBRVQsQ0FBQ2UsSUFBRCxJQUFTLFFBRkEsQ0FGYjtBQU1FLG9DQUNLYixNQURMO0FBRUVSLHdCQUFTWixLQUFULFlBRkY7QUFHRUEseUJBQVVBLEtBQVYsT0FIRjtBQUlFYyw0QkFBYUEsUUFBYjtBQUpGO0FBTkYsaUJBWU02RCxRQUFRbEUsSUFaZDtBQUFBO0FBQUEsYUFERjtBQWtCRCxXQXRDQTtBQVBIO0FBSkYsT0FERjtBQXNERCxLQXpERDs7QUEyREEsUUFBTThFLG9CQUFvQixTQUFwQkEsaUJBQW9CLEdBQU07QUFDOUIsVUFBTUMsYUFBYXpLLGNBQWNvRixVQUFkLEVBQTBCSSxTQUExQixFQUFxQ0EsU0FBckMsUUFBbkI7QUFDQSxVQUFNa0YsZUFBZSxnQkFBRW5GLFVBQUYsQ0FBYXRGLGdCQUFnQm1GLFVBQWhCLEVBQTRCSSxTQUE1QixFQUF1Q0EsU0FBdkMsUUFBYixDQUFyQjtBQUNBLGFBQ0U7QUFBQyxzQkFBRDtBQUFBO0FBQ0UscUJBQVdpRixXQUFXMUwsU0FEeEI7QUFFRSw4QkFDSzBMLFdBQVd6TCxLQURoQjtBQUVFa0csc0JBQWFWLFdBQWI7QUFGRjtBQUZGLFdBTU1pRyxXQUFXL0UsSUFOakI7QUFRRTtBQUFDLHFCQUFEO0FBQUE7QUFDRSx1QkFBVywwQkFDVGdGLGFBQWEzTCxTQURKLENBRGI7QUFJRSxtQkFBTzJMLGFBQWExTDtBQUp0QixhQUtNMEwsYUFBYWhGLElBTG5CO0FBT0dsRCw0QkFBa0JrQyxHQUFsQixDQUFzQixVQUFDa0IsTUFBRCxFQUFTK0QsRUFBVCxFQUFnQjtBQUNyQyxnQkFBTWhGLFVBQVV4RCxTQUFTeUQsSUFBVCxDQUFjO0FBQUEscUJBQUtDLEVBQUVDLEVBQUYsS0FBU2MsT0FBT2QsRUFBckI7QUFBQSxhQUFkLEtBQTBDLEVBQTFEO0FBQ0EsZ0JBQU1vQyxPQUFPLE9BQU90QixPQUFPc0IsSUFBZCxLQUF1QixVQUF2QixHQUFvQ3RCLE9BQU9zQixJQUFQLEVBQXBDLEdBQW9EdEIsT0FBT3NCLElBQXhFO0FBQ0EsZ0JBQU1qQyxRQUFRLGdCQUFFRixlQUFGLENBQWtCSixRQUFRSyxLQUExQixFQUFpQ1ksT0FBT1gsS0FBeEMsRUFBK0NXLE9BQU9WLFFBQXRELENBQWQ7QUFDQSxnQkFBTWEsV0FBVyxnQkFBRWhCLGVBQUYsQ0FBa0JKLFFBQVFLLEtBQTFCLEVBQWlDWSxPQUFPWCxLQUF4QyxFQUErQ1csT0FBT0csUUFBdEQsQ0FBakI7QUFDQSxnQkFBTTRFLGVBQWUsZ0JBQUVwRixVQUFGLENBQWFyRixnQkFBZ0JrRixVQUFoQixFQUE0QkksU0FBNUIsRUFBdUNBLFNBQXZDLFFBQWIsQ0FBckI7QUFDQSxnQkFBTXFFLGNBQWMsZ0JBQUV0RSxVQUFGLENBQWFLLE9BQU8zRyxRQUFQLENBQWdCbUcsVUFBaEIsRUFBNEJJLFNBQTVCLEVBQXVDSSxNQUF2QyxRQUFiLENBQXBCO0FBQ0EsZ0JBQU1nRixvQkFBb0IsZ0JBQUVyRixVQUFGLENBQWFLLE9BQU9pRixjQUFQLENBQXNCekYsVUFBdEIsRUFBa0NJLFNBQWxDLEVBQTZDSSxNQUE3QyxRQUFiLENBQTFCOztBQUVBLGdCQUFNTyxVQUFVLENBQ2R3RSxhQUFhNUwsU0FEQyxFQUVkNkcsT0FBTzdHLFNBRk8sRUFHZDhLLFlBQVk5SyxTQUhFLEVBSWQ2TCxrQkFBa0I3TCxTQUpKLENBQWhCOztBQU9BLGdCQUFNc0gsc0JBQ0RzRSxhQUFhM0wsS0FEWixFQUVENEcsT0FBTzVHLEtBRk4sRUFHRDZLLFlBQVk3SyxLQUhYLEVBSUQ0TCxrQkFBa0I1TCxLQUpqQixDQUFOOztBQU9BLGdCQUFJNEcsT0FBT1ksUUFBWCxFQUFxQjtBQUNuQixrQkFBSVosT0FBT2EsWUFBWCxFQUF5QjtBQUN2Qix1QkFDRTtBQUFDLDZCQUFEO0FBQUE7QUFDRSx5QkFBS2tELEVBRFA7QUFFRSwrQkFBVywwQkFDVCxVQURTLEVBRVR4RCxPQUZTLENBRmI7QUFNRSx3Q0FDS0UsTUFETDtBQUVFUiw0QkFBU1osS0FBVCxZQUZGO0FBR0VBLDZCQUFVQSxLQUFWLE9BSEY7QUFJRWMsZ0NBQWFBLFFBQWI7QUFKRjtBQU5GLHFCQVlNOEQsWUFBWW5FLElBWmxCLEVBYU1pRixhQUFhakYsSUFibkIsRUFjTWtGLGtCQUFrQmxGLElBZHhCO0FBZ0JHLGtDQUFFZ0Isa0JBQUYsQ0FBcUJkLE9BQU9sQyxNQUE1QjtBQWhCSCxpQkFERjtBQW9CRDs7QUFFRDtBQUNBLHFCQUNFLDhCQUFDLFdBQUQ7QUFDRSxxQkFBS2lHLEVBRFA7QUFFRSwyQkFBVywwQkFDVHhELE9BRFMsRUFFVCxFQUFDbUUsUUFBUSxDQUFDcEQsSUFBVixFQUZTLENBRmI7QUFNRSxvQ0FDS2IsTUFETDtBQUVFUixrQ0FGRjtBQUdFWix5QkFBVXpFLG1CQUFWO0FBSEY7QUFORixnQkFERjtBQWNEOztBQUVEO0FBQ0EsbUJBQ0U7QUFBQyx5QkFBRDtBQUFBO0FBQ0UscUJBQUttSixFQURQO0FBRUUsMkJBQVcsMEJBQ1R4RCxPQURTLEVBRVQsQ0FBQ2UsSUFBRCxJQUFTLFFBRkEsQ0FGYjtBQU1FLG9DQUNLYixNQURMO0FBRUVSLHdCQUFTWixLQUFULFlBRkY7QUFHRUEseUJBQVVBLEtBQVYsT0FIRjtBQUlFYyw0QkFBYUEsUUFBYjtBQUpGO0FBTkYsaUJBWU04RCxZQUFZbkUsSUFabEIsRUFhTWlGLGFBQWFqRixJQWJuQixFQWNNa0Ysa0JBQWtCbEYsSUFkeEI7QUFnQkcsOEJBQUVnQixrQkFBRixDQUFxQmQsT0FBT2xDLE1BQTVCLEVBQW9DO0FBQ25Da0Qsc0JBQU1qRSxVQUQ2QjtBQUVuQ2lELHdCQUFRQTtBQUYyQixlQUFwQztBQWhCSCxhQURGO0FBdUJELFdBeEZBO0FBUEg7QUFSRixPQURGO0FBNEdELEtBL0dEOztBQWlIQSxRQUFNa0YsWUFBWSxnQkFBRXZGLFVBQUYsQ0FBYXRHLFNBQVNtRyxVQUFULEVBQXFCSSxTQUFyQixFQUFnQ0EsU0FBaEMsRUFBMkMsSUFBM0MsQ0FBYixDQUFsQjtBQUNBLFFBQU11RixhQUFhLGdCQUFFeEYsVUFBRixDQUFhckcsY0FBY2tHLFVBQWQsRUFBMEJJLFNBQTFCLEVBQXFDQSxTQUFyQyxFQUFnRCxJQUFoRCxDQUFiLENBQW5CO0FBQ0EsUUFBTXdGLGFBQWEsZ0JBQUV6RixVQUFGLENBQWEzRixjQUFjd0YsVUFBZCxFQUEwQkksU0FBMUIsRUFBcUNBLFNBQXJDLEVBQWdELElBQWhELENBQWIsQ0FBbkI7QUFDQSxRQUFNeUYsa0JBQWtCLGdCQUFFMUYsVUFBRixDQUFhcEYsbUJBQW1CaUYsVUFBbkIsRUFBK0JJLFNBQS9CLEVBQTBDQSxTQUExQyxFQUFxRCxJQUFyRCxDQUFiLENBQXhCO0FBQ0EsUUFBTTBGLGVBQWU5SyxnQkFBZ0JnRixVQUFoQixFQUE0QkksU0FBNUIsRUFBdUNBLFNBQXZDLEVBQWtELElBQWxELENBQXJCO0FBQ0EsUUFBTTJGLGNBQWM5SyxlQUFlK0UsVUFBZixFQUEyQkksU0FBM0IsRUFBc0NBLFNBQXRDLEVBQWlELElBQWpELENBQXBCO0FBQ0EsUUFBTStCLGVBQWVqSCxnQkFBZ0I4RSxVQUFoQixFQUE0QkksU0FBNUIsRUFBdUNBLFNBQXZDLEVBQWtELElBQWxELENBQXJCOztBQUVBLFFBQU00RixZQUFZLFNBQVpBLFNBQVk7QUFBQSxhQUNoQjtBQUFBO0FBQUE7QUFDRSxxQkFBVywwQkFDVCxZQURTLEVBRVRyTSxTQUZTLEVBR1QrTCxVQUFVL0wsU0FIRCxDQURiO0FBTUUsOEJBQ0tDLEtBREwsRUFFSzhMLFVBQVU5TCxLQUZmO0FBTkYsV0FVTThMLFVBQVVwRixJQVZoQjtBQVlFO0FBQUMsd0JBQUQ7QUFBQTtBQUNFLHVCQUFXLDBCQUFXcUYsV0FBV2hNLFNBQXRCLENBRGI7QUFFRSxtQkFBT2dNLFdBQVcvTDtBQUZwQixhQUdNK0wsV0FBV3JGLElBSGpCO0FBS0doRCw0QkFBa0IyQyxrQkFBbEIsR0FBdUMsSUFMMUM7QUFNR3dCLHVCQU5IO0FBT0dqRyx3QkFBY2tILGFBQWQsR0FBOEIsSUFQakM7QUFRRTtBQUFDLDBCQUFEO0FBQUE7QUFDRSx5QkFBVywwQkFBV2tELFdBQVdqTSxTQUF0QixDQURiO0FBRUUsa0NBQ0tpTSxXQUFXaE0sS0FEaEI7QUFFRWtHLDBCQUFhVixXQUFiO0FBRkY7QUFGRixlQU1Nd0csV0FBV3RGLElBTmpCO0FBUUc1QyxxQkFBUzRCLEdBQVQsQ0FBYSxVQUFDakIsQ0FBRCxFQUFJUSxDQUFKO0FBQUEscUJBQVU0RSxZQUFZcEYsQ0FBWixFQUFlUSxDQUFmLENBQVY7QUFBQSxhQUFiLENBUkg7QUFTR2Ysb0JBQVF3QixHQUFSLENBQVk2RixVQUFaO0FBVEgsV0FSRjtBQW1CR2hILDRCQUFrQmlILG1CQUFsQixHQUF3QztBQW5CM0MsU0FaRjtBQWlDR2pLLHlCQUNDLDhCQUFDLG1CQUFELGVBQ00zQixhQUROO0FBRUUsaUJBQU93QyxLQUZUO0FBR0UsdUJBQWFrRCxXQUhmO0FBSUUsbUJBQVNDLE9BSlg7QUFLRSx3QkFBYyxNQUFLOEcsWUFMckI7QUFNRSw0QkFBa0IsTUFBS0MsZ0JBTnpCO0FBT0UscUJBQVdMLGdCQUFnQmxNLFNBUDdCO0FBUUUsaUJBQU9rTSxnQkFBZ0JqTTtBQVJ6QixXQVNNaU0sZ0JBQWdCdkYsSUFUdEIsRUFERCxHQVlHLElBN0NOO0FBOENHLFNBQUM1QyxTQUFTUSxNQUFWLElBQ0M7QUFBQyx5QkFBRDtBQUNNNkgscUJBRE47QUFHRywwQkFBRXpFLGtCQUFGLENBQXFCL0YsVUFBckI7QUFISCxTQS9DSjtBQXFERSxzQ0FBQyxnQkFBRDtBQUNFLG1CQUFTRyxPQURYO0FBRUUsdUJBQWFKO0FBRmYsV0FHTXdLLFlBSE47QUFyREYsT0FEZ0I7QUFBQSxLQUFsQjs7QUE4REE7QUFDQSxXQUFPcE0sV0FBV0EsU0FBU3NHLFVBQVQsRUFBcUJnRyxTQUFyQixFQUFnQyxJQUFoQyxDQUFYLEdBQW1EQSxXQUExRDtBQUNEO0FBeDZCWSxHIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IGNsYXNzbmFtZXMgZnJvbSAnY2xhc3NuYW1lcydcbi8vXG5pbXBvcnQgXyBmcm9tICcuL3V0aWxzJ1xuaW1wb3J0IGxpZmVjeWNsZSBmcm9tICcuL2xpZmVjeWNsZSdcbmltcG9ydCBtZXRob2RzIGZyb20gJy4vbWV0aG9kcydcbmltcG9ydCBkZWZhdWx0cyBmcm9tICcuL2RlZmF1bHRQcm9wcydcblxuZXhwb3J0IGNvbnN0IFJlYWN0VGFibGVEZWZhdWx0cyA9IGRlZmF1bHRzXG5cbmV4cG9ydCBkZWZhdWx0IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgLi4ubGlmZWN5Y2xlLFxuICAuLi5tZXRob2RzLFxuXG4gIHJlbmRlciAoKSB7XG4gICAgY29uc3QgcmVzb2x2ZWRTdGF0ZSA9IHRoaXMuZ2V0UmVzb2x2ZWRTdGF0ZSgpXG4gICAgY29uc3Qge1xuICAgICAgY2hpbGRyZW4sXG4gICAgICBjbGFzc05hbWUsXG4gICAgICBzdHlsZSxcbiAgICAgIGdldFByb3BzLFxuICAgICAgZ2V0VGFibGVQcm9wcyxcbiAgICAgIGdldFRoZWFkR3JvdXBQcm9wcyxcbiAgICAgIGdldFRoZWFkR3JvdXBUclByb3BzLFxuICAgICAgZ2V0VGhlYWRHcm91cFRoUHJvcHMsXG4gICAgICBnZXRUaGVhZFByb3BzLFxuICAgICAgZ2V0VGhlYWRUclByb3BzLFxuICAgICAgZ2V0VGhlYWRUaFByb3BzLFxuICAgICAgZ2V0VGhlYWRGaWx0ZXJQcm9wcyxcbiAgICAgIGdldFRoZWFkRmlsdGVyVHJQcm9wcyxcbiAgICAgIGdldFRoZWFkRmlsdGVyVGhQcm9wcyxcbiAgICAgIGdldFRib2R5UHJvcHMsXG4gICAgICBnZXRUckdyb3VwUHJvcHMsXG4gICAgICBnZXRUclByb3BzLFxuICAgICAgZ2V0VGRQcm9wcyxcbiAgICAgIGdldFRmb290UHJvcHMsXG4gICAgICBnZXRUZm9vdFRyUHJvcHMsXG4gICAgICBnZXRUZm9vdFRkUHJvcHMsXG4gICAgICBnZXRQYWdpbmF0aW9uUHJvcHMsXG4gICAgICBnZXRMb2FkaW5nUHJvcHMsXG4gICAgICBnZXROb0RhdGFQcm9wcyxcbiAgICAgIGdldFJlc2l6ZXJQcm9wcyxcbiAgICAgIHNob3dQYWdpbmF0aW9uLFxuICAgICAgZXhwYW5kZXJDb2x1bW5XaWR0aCxcbiAgICAgIG1hbnVhbCxcbiAgICAgIGxvYWRpbmdUZXh0LFxuICAgICAgbm9EYXRhVGV4dCxcbiAgICAgIHNob3dGaWx0ZXJzLFxuICAgICAgcmVzaXphYmxlLFxuICAgICAgLy8gU3RhdGVcbiAgICAgIGxvYWRpbmcsXG4gICAgICBwYWdlU2l6ZSxcbiAgICAgIHBhZ2UsXG4gICAgICBzb3J0aW5nLFxuICAgICAgZmlsdGVyaW5nLFxuICAgICAgcmVzaXppbmcsXG4gICAgICBwYWdlcyxcbiAgICAgIC8vIFBpdm90aW5nIFN0YXRlXG4gICAgICBwaXZvdFZhbEtleSxcbiAgICAgIHN1YlJvd3NLZXksXG4gICAgICBleHBhbmRlZFJvd3MsXG4gICAgICBvbkV4cGFuZFJvdyxcbiAgICAgIC8vIENvbXBvbmVudHNcbiAgICAgIFRhYmxlQ29tcG9uZW50LFxuICAgICAgVGhlYWRDb21wb25lbnQsXG4gICAgICBUYm9keUNvbXBvbmVudCxcbiAgICAgIFRyR3JvdXBDb21wb25lbnQsXG4gICAgICBUckNvbXBvbmVudCxcbiAgICAgIFRoQ29tcG9uZW50LFxuICAgICAgVGRDb21wb25lbnQsXG4gICAgICBUZm9vdENvbXBvbmVudCxcbiAgICAgIEV4cGFuZGVyQ29tcG9uZW50LFxuICAgICAgUGFnaW5hdGlvbkNvbXBvbmVudCxcbiAgICAgIExvYWRpbmdDb21wb25lbnQsXG4gICAgICBTdWJDb21wb25lbnQsXG4gICAgICBOb0RhdGFDb21wb25lbnQsXG4gICAgICBSZXNpemVyQ29tcG9uZW50LFxuICAgICAgLy8gRGF0YSBtb2RlbFxuICAgICAgcmVzb2x2ZWREYXRhLFxuICAgICAgYWxsVmlzaWJsZUNvbHVtbnMsXG4gICAgICBoZWFkZXJHcm91cHMsXG4gICAgICBoYXNIZWFkZXJHcm91cHMsXG4gICAgICAvLyBTb3J0ZWQgRGF0YVxuICAgICAgc29ydGVkRGF0YVxuICAgIH0gPSByZXNvbHZlZFN0YXRlXG5cbiAgICAvLyBQYWdpbmF0aW9uXG4gICAgY29uc3Qgc3RhcnRSb3cgPSBwYWdlU2l6ZSAqIHBhZ2VcbiAgICBjb25zdCBlbmRSb3cgPSBzdGFydFJvdyArIHBhZ2VTaXplXG4gICAgY29uc3QgcGFnZVJvd3MgPSBtYW51YWwgPyByZXNvbHZlZERhdGEgOiBzb3J0ZWREYXRhLnNsaWNlKHN0YXJ0Um93LCBlbmRSb3cpXG4gICAgY29uc3QgbWluUm93cyA9IHRoaXMuZ2V0TWluUm93cygpXG4gICAgY29uc3QgcGFkUm93cyA9IF8ucmFuZ2UoTWF0aC5tYXgobWluUm93cyAtIHBhZ2VSb3dzLmxlbmd0aCwgMCkpXG5cbiAgICBjb25zdCBoYXNDb2x1bW5Gb290ZXIgPSBhbGxWaXNpYmxlQ29sdW1ucy5zb21lKGQgPT4gZC5mb290ZXIpXG5cbiAgICBjb25zdCByZWN1cnNlUm93c1ZpZXdJbmRleCA9IChyb3dzLCBwYXRoID0gW10sIGluZGV4ID0gLTEpID0+IHtcbiAgICAgIHJvd3MuZm9yRWFjaCgocm93LCBpKSA9PiB7XG4gICAgICAgIGluZGV4KytcbiAgICAgICAgcm93Ll92aWV3SW5kZXggPSBpbmRleFxuICAgICAgICBjb25zdCBuZXdQYXRoID0gcGF0aC5jb25jYXQoW2ldKVxuICAgICAgICBpZiAocm93W3N1YlJvd3NLZXldICYmIF8uZ2V0KGV4cGFuZGVkUm93cywgbmV3UGF0aCkpIHtcbiAgICAgICAgICBpbmRleCA9IHJlY3Vyc2VSb3dzVmlld0luZGV4KHJvd1tzdWJSb3dzS2V5XSwgbmV3UGF0aCwgaW5kZXgpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICByZXR1cm4gaW5kZXhcbiAgICB9XG5cbiAgICByZWN1cnNlUm93c1ZpZXdJbmRleChwYWdlUm93cylcblxuICAgIGNvbnN0IGNhblByZXZpb3VzID0gcGFnZSA+IDBcbiAgICBjb25zdCBjYW5OZXh0ID0gcGFnZSArIDEgPCBwYWdlc1xuXG4gICAgY29uc3Qgcm93TWluV2lkdGggPSBfLnN1bShhbGxWaXNpYmxlQ29sdW1ucy5tYXAoZCA9PiB7XG4gICAgICBjb25zdCByZXNpemVkID0gcmVzaXppbmcuZmluZCh4ID0+IHguaWQgPT09IGQuaWQpIHx8IHt9XG4gICAgICByZXR1cm4gXy5nZXRGaXJzdERlZmluZWQocmVzaXplZC52YWx1ZSwgZC53aWR0aCwgZC5taW5XaWR0aClcbiAgICB9KSlcblxuICAgIGxldCByb3dJbmRleCA9IC0xXG5cbiAgICBjb25zdCBmaW5hbFN0YXRlID0ge1xuICAgICAgLi4ucmVzb2x2ZWRTdGF0ZSxcbiAgICAgIHN0YXJ0Um93LFxuICAgICAgZW5kUm93LFxuICAgICAgcGFnZVJvd3MsXG4gICAgICBtaW5Sb3dzLFxuICAgICAgcGFkUm93cyxcbiAgICAgIGhhc0NvbHVtbkZvb3RlcixcbiAgICAgIGNhblByZXZpb3VzLFxuICAgICAgY2FuTmV4dCxcbiAgICAgIHJvd01pbldpZHRoXG4gICAgfVxuXG4gICAgLy8gVmlzdWFsIENvbXBvbmVudHNcblxuICAgIGNvbnN0IG1ha2VIZWFkZXJHcm91cHMgPSAoKSA9PiB7XG4gICAgICBjb25zdCB0aGVhZEdyb3VwUHJvcHMgPSBfLnNwbGl0UHJvcHMoZ2V0VGhlYWRHcm91cFByb3BzKGZpbmFsU3RhdGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0aGlzKSlcbiAgICAgIGNvbnN0IHRoZWFkR3JvdXBUclByb3BzID0gXy5zcGxpdFByb3BzKGdldFRoZWFkR3JvdXBUclByb3BzKGZpbmFsU3RhdGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0aGlzKSlcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxUaGVhZENvbXBvbmVudFxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcygnLWhlYWRlckdyb3VwcycsIHRoZWFkR3JvdXBQcm9wcy5jbGFzc05hbWUpfVxuICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAuLi50aGVhZEdyb3VwUHJvcHMuc3R5bGUsXG4gICAgICAgICAgICBtaW5XaWR0aDogYCR7cm93TWluV2lkdGh9cHhgXG4gICAgICAgICAgfX1cbiAgICAgICAgICB7Li4udGhlYWRHcm91cFByb3BzLnJlc3R9XG4gICAgICAgID5cbiAgICAgICAgICA8VHJDb21wb25lbnRcbiAgICAgICAgICAgIGNsYXNzTmFtZT17dGhlYWRHcm91cFRyUHJvcHMuY2xhc3NOYW1lfVxuICAgICAgICAgICAgc3R5bGU9e3RoZWFkR3JvdXBUclByb3BzLnN0eWxlfVxuICAgICAgICAgICAgey4uLnRoZWFkR3JvdXBUclByb3BzLnJlc3R9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2hlYWRlckdyb3Vwcy5tYXAobWFrZUhlYWRlckdyb3VwKX1cbiAgICAgICAgICA8L1RyQ29tcG9uZW50PlxuICAgICAgICA8L1RoZWFkQ29tcG9uZW50PlxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IG1ha2VIZWFkZXJHcm91cCA9IChjb2x1bW4sIGkpID0+IHtcbiAgICAgIGNvbnN0IGZsZXggPSBfLnN1bShjb2x1bW4uY29sdW1ucy5tYXAoZCA9PiB7XG4gICAgICAgIGNvbnN0IHJlc2l6ZWQgPSByZXNpemluZy5maW5kKHggPT4geC5pZCA9PT0gZC5pZCkgfHwge31cbiAgICAgICAgcmV0dXJuIGQud2lkdGggfHwgcmVzaXplZC52YWx1ZSA/IDAgOiBkLm1pbldpZHRoXG4gICAgICB9KSlcbiAgICAgIGNvbnN0IHdpZHRoID0gXy5zdW0oY29sdW1uLmNvbHVtbnMubWFwKGQgPT4ge1xuICAgICAgICBjb25zdCByZXNpemVkID0gcmVzaXppbmcuZmluZCh4ID0+IHguaWQgPT09IGQuaWQpIHx8IHt9XG4gICAgICAgIHJldHVybiBfLmdldEZpcnN0RGVmaW5lZChyZXNpemVkLnZhbHVlLCBkLndpZHRoLCBkLm1pbldpZHRoKVxuICAgICAgfSkpXG4gICAgICBjb25zdCBtYXhXaWR0aCA9IF8uc3VtKGNvbHVtbi5jb2x1bW5zLm1hcChkID0+IHtcbiAgICAgICAgY29uc3QgcmVzaXplZCA9IHJlc2l6aW5nLmZpbmQoeCA9PiB4LmlkID09PSBkLmlkKSB8fCB7fVxuICAgICAgICByZXR1cm4gXy5nZXRGaXJzdERlZmluZWQocmVzaXplZC52YWx1ZSwgZC53aWR0aCwgZC5tYXhXaWR0aClcbiAgICAgIH0pKVxuICAgICAgY29uc3QgdGhlYWRHcm91cFRoUHJvcHMgPSBfLnNwbGl0UHJvcHMoZ2V0VGhlYWRHcm91cFRoUHJvcHMoZmluYWxTdGF0ZSwgdW5kZWZpbmVkLCBjb2x1bW4sIHRoaXMpKVxuICAgICAgY29uc3QgY29sdW1uSGVhZGVyUHJvcHMgPSBfLnNwbGl0UHJvcHMoY29sdW1uLmdldEhlYWRlclByb3BzKGZpbmFsU3RhdGUsIHVuZGVmaW5lZCwgY29sdW1uLCB0aGlzKSlcblxuICAgICAgY29uc3QgY2xhc3NlcyA9IFtcbiAgICAgICAgY29sdW1uLmhlYWRlckNsYXNzTmFtZSxcbiAgICAgICAgdGhlYWRHcm91cFRoUHJvcHMuY2xhc3NOYW1lLFxuICAgICAgICBjb2x1bW5IZWFkZXJQcm9wcy5jbGFzc05hbWVcbiAgICAgIF1cblxuICAgICAgY29uc3Qgc3R5bGVzID0ge1xuICAgICAgICAuLi5jb2x1bW4uaGVhZGVyU3R5bGUsXG4gICAgICAgIC4uLnRoZWFkR3JvdXBUaFByb3BzLnN0eWxlLFxuICAgICAgICAuLi5jb2x1bW5IZWFkZXJQcm9wcy5zdHlsZVxuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN0ID0ge1xuICAgICAgICAuLi50aGVhZEdyb3VwVGhQcm9wcy5yZXN0LFxuICAgICAgICAuLi5jb2x1bW5IZWFkZXJQcm9wcy5yZXN0XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGZsZXhTdHlsZXMgPSB7XG4gICAgICAgIGZsZXg6IGAke2ZsZXh9IDAgYXV0b2AsXG4gICAgICAgIHdpZHRoOiBgJHt3aWR0aH1weGAsXG4gICAgICAgIG1heFdpZHRoOiBgJHttYXhXaWR0aH1weGBcbiAgICAgIH1cblxuICAgICAgaWYgKGNvbHVtbi5leHBhbmRlcikge1xuICAgICAgICBpZiAoY29sdW1uLnBpdm90Q29sdW1ucykge1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8VGhDb21wb25lbnRcbiAgICAgICAgICAgICAga2V5PXtpfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzbmFtZXMoXG4gICAgICAgICAgICAgICAgJ3J0LXBpdm90LWhlYWRlcicsXG4gICAgICAgICAgICAgICAgY2xhc3Nlc1xuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgIC4uLnN0eWxlcyxcbiAgICAgICAgICAgICAgICAuLi5mbGV4U3R5bGVzXG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIHsuLi5yZXN0fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8VGhDb21wb25lbnRcbiAgICAgICAgICAgIGtleT17aX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcyhcbiAgICAgICAgICAgICAgJ3J0LWV4cGFuZGVyLWhlYWRlcicsXG4gICAgICAgICAgICAgIGNsYXNzZXNcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAuLi5zdHlsZXMsXG4gICAgICAgICAgICAgIGZsZXg6IGAwIDAgYXV0b2AsXG4gICAgICAgICAgICAgIHdpZHRoOiBgJHtleHBhbmRlckNvbHVtbldpZHRofXB4YFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIHsuLi5yZXN0fVxuICAgICAgICAgIC8+XG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxUaENvbXBvbmVudFxuICAgICAgICAgIGtleT17aX1cbiAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzbmFtZXMoXG4gICAgICAgICAgICBjbGFzc2VzXG4gICAgICAgICAgKX1cbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgLi4uc3R5bGVzLFxuICAgICAgICAgICAgLi4uZmxleFN0eWxlc1xuICAgICAgICAgIH19XG4gICAgICAgICAgey4uLnJlc3R9XG4gICAgICAgID5cbiAgICAgICAgICB7Xy5ub3JtYWxpemVDb21wb25lbnQoY29sdW1uLmhlYWRlciwge1xuICAgICAgICAgICAgZGF0YTogc29ydGVkRGF0YSxcbiAgICAgICAgICAgIGNvbHVtbjogY29sdW1uXG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvVGhDb21wb25lbnQ+XG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgbWFrZUhlYWRlcnMgPSAoKSA9PiB7XG4gICAgICBjb25zdCB0aGVhZFByb3BzID0gXy5zcGxpdFByb3BzKGdldFRoZWFkUHJvcHMoZmluYWxTdGF0ZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHRoaXMpKVxuICAgICAgY29uc3QgdGhlYWRUclByb3BzID0gXy5zcGxpdFByb3BzKGdldFRoZWFkVHJQcm9wcyhmaW5hbFN0YXRlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdGhpcykpXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8VGhlYWRDb21wb25lbnRcbiAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzbmFtZXMoJy1oZWFkZXInLCB0aGVhZFByb3BzLmNsYXNzTmFtZSl9XG4gICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgIC4uLnRoZWFkUHJvcHMuc3R5bGUsXG4gICAgICAgICAgICBtaW5XaWR0aDogYCR7cm93TWluV2lkdGh9cHhgXG4gICAgICAgICAgfX1cbiAgICAgICAgICB7Li4udGhlYWRQcm9wcy5yZXN0fVxuICAgICAgICA+XG4gICAgICAgICAgPFRyQ29tcG9uZW50XG4gICAgICAgICAgICBjbGFzc05hbWU9e3RoZWFkVHJQcm9wcy5jbGFzc05hbWV9XG4gICAgICAgICAgICBzdHlsZT17dGhlYWRUclByb3BzLnN0eWxlfVxuICAgICAgICAgICAgey4uLnRoZWFkVHJQcm9wcy5yZXN0fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHthbGxWaXNpYmxlQ29sdW1ucy5tYXAobWFrZUhlYWRlcil9XG4gICAgICAgICAgPC9UckNvbXBvbmVudD5cbiAgICAgICAgPC9UaGVhZENvbXBvbmVudD5cbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCBtYWtlSGVhZGVyID0gKGNvbHVtbiwgaSkgPT4ge1xuICAgICAgY29uc3QgcmVzaXplZCA9IHJlc2l6aW5nLmZpbmQoeCA9PiB4LmlkID09PSBjb2x1bW4uaWQpIHx8IHt9XG4gICAgICBjb25zdCBzb3J0ID0gc29ydGluZy5maW5kKGQgPT4gZC5pZCA9PT0gY29sdW1uLmlkKVxuICAgICAgY29uc3Qgc2hvdyA9IHR5cGVvZiBjb2x1bW4uc2hvdyA9PT0gJ2Z1bmN0aW9uJyA/IGNvbHVtbi5zaG93KCkgOiBjb2x1bW4uc2hvd1xuICAgICAgY29uc3Qgd2lkdGggPSBfLmdldEZpcnN0RGVmaW5lZChyZXNpemVkLnZhbHVlLCBjb2x1bW4ud2lkdGgsIGNvbHVtbi5taW5XaWR0aClcbiAgICAgIGNvbnN0IG1heFdpZHRoID0gXy5nZXRGaXJzdERlZmluZWQocmVzaXplZC52YWx1ZSwgY29sdW1uLndpZHRoLCBjb2x1bW4ubWF4V2lkdGgpXG4gICAgICBjb25zdCB0aGVhZFRoUHJvcHMgPSBfLnNwbGl0UHJvcHMoZ2V0VGhlYWRUaFByb3BzKGZpbmFsU3RhdGUsIHVuZGVmaW5lZCwgY29sdW1uLCB0aGlzKSlcbiAgICAgIGNvbnN0IGNvbHVtbkhlYWRlclByb3BzID0gXy5zcGxpdFByb3BzKGNvbHVtbi5nZXRIZWFkZXJQcm9wcyhmaW5hbFN0YXRlLCB1bmRlZmluZWQsIGNvbHVtbiwgdGhpcykpXG5cbiAgICAgIGNvbnN0IGNsYXNzZXMgPSBbXG4gICAgICAgIGNvbHVtbi5oZWFkZXJDbGFzc05hbWUsXG4gICAgICAgIHRoZWFkVGhQcm9wcy5jbGFzc05hbWUsXG4gICAgICAgIGNvbHVtbkhlYWRlclByb3BzLmNsYXNzTmFtZVxuICAgICAgXVxuXG4gICAgICBjb25zdCBzdHlsZXMgPSB7XG4gICAgICAgIC4uLmNvbHVtbi5oZWFkZXJTdHlsZSxcbiAgICAgICAgLi4udGhlYWRUaFByb3BzLnN0eWxlLFxuICAgICAgICAuLi5jb2x1bW5IZWFkZXJQcm9wcy5zdHlsZVxuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN0ID0ge1xuICAgICAgICAuLi50aGVhZFRoUHJvcHMucmVzdCxcbiAgICAgICAgLi4uY29sdW1uSGVhZGVyUHJvcHMucmVzdFxuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNpemVyID0gcmVzaXphYmxlID8gKFxuICAgICAgICA8UmVzaXplckNvbXBvbmVudFxuICAgICAgICAgIG9uTW91c2VEb3duPXtlID0+IHRoaXMucmVzaXplQ29sdW1uU3RhcnQoY29sdW1uLCBlLCBmYWxzZSl9XG4gICAgICAgICAgb25Ub3VjaFN0YXJ0PXtlID0+IHRoaXMucmVzaXplQ29sdW1uU3RhcnQoY29sdW1uLCBlLCB0cnVlKX1cbiAgICAgICAgICB7Li4ucmVzaXplclByb3BzfVxuICAgICAgICAvPlxuICAgICAgKSA6IG51bGxcblxuICAgICAgaWYgKGNvbHVtbi5leHBhbmRlcikge1xuICAgICAgICBpZiAoY29sdW1uLnBpdm90Q29sdW1ucykge1xuICAgICAgICAgIGNvbnN0IHBpdm90U29ydCA9IHNvcnRpbmcuZmluZChkID0+IGQuaWQgPT09IGNvbHVtbi5pZClcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFRoQ29tcG9uZW50XG4gICAgICAgICAgICAgIGtleT17aX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc25hbWVzKFxuICAgICAgICAgICAgICAgICdydC1waXZvdC1oZWFkZXInLFxuICAgICAgICAgICAgICAgICdydC1yZXNpemFibGUtaGVhZGVyJyxcbiAgICAgICAgICAgICAgICBjb2x1bW4uc29ydGFibGUgJiYgJy1jdXJzb3ItcG9pbnRlcicsXG4gICAgICAgICAgICAgICAgY2xhc3NlcyxcbiAgICAgICAgICAgICAgICBwaXZvdFNvcnQgPyAocGl2b3RTb3J0LmRlc2MgPyAnLXNvcnQtZGVzYycgOiAnLXNvcnQtYXNjJykgOiAnJ1xuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgIC4uLnN0eWxlcyxcbiAgICAgICAgICAgICAgICBmbGV4OiBgJHt3aWR0aH0gMCBhdXRvYCxcbiAgICAgICAgICAgICAgICB3aWR0aDogYCR7d2lkdGh9cHhgLFxuICAgICAgICAgICAgICAgIG1heFdpZHRoOiBgJHttYXhXaWR0aH1weGBcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgdG9nZ2xlU29ydD17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb2x1bW4uc29ydGFibGUgJiYgdGhpcy5zb3J0Q29sdW1uKGNvbHVtbi5waXZvdENvbHVtbnMsIGUuc2hpZnRLZXkpXG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIHsuLi5yZXN0fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncnQtcmVzaXphYmxlLWhlYWRlci1jb250ZW50Jz5cbiAgICAgICAgICAgICAgICB7Y29sdW1uLnBpdm90Q29sdW1ucy5tYXAoKHBpdm90Q29sdW1uLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBrZXk9e3Bpdm90Q29sdW1uLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICB7Xy5ub3JtYWxpemVDb21wb25lbnQocGl2b3RDb2x1bW4uaGVhZGVyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBzb3J0ZWREYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uOiBjb2x1bW5cbiAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICB7aSA8IGNvbHVtbi5waXZvdENvbHVtbnMubGVuZ3RoIC0gMSAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8RXhwYW5kZXJDb21wb25lbnQgLz5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB7cmVzaXplcn1cbiAgICAgICAgICAgIDwvVGhDb21wb25lbnQ+XG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPFRoQ29tcG9uZW50XG4gICAgICAgICAgICBrZXk9e2l9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzbmFtZXMoXG4gICAgICAgICAgICAgICdydC1leHBhbmRlci1oZWFkZXInLFxuICAgICAgICAgICAgICBjbGFzc2VzXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgLi4uc3R5bGVzLFxuICAgICAgICAgICAgICBmbGV4OiBgMCAwIGF1dG9gLFxuICAgICAgICAgICAgICB3aWR0aDogYCR7ZXhwYW5kZXJDb2x1bW5XaWR0aH1weGBcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICB7Li4ucmVzdH1cbiAgICAgICAgICAvPlxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxUaENvbXBvbmVudFxuICAgICAgICAgIGtleT17aX1cbiAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzbmFtZXMoXG4gICAgICAgICAgICBjbGFzc2VzLFxuICAgICAgICAgICAgJ3J0LXJlc2l6YWJsZS1oZWFkZXInLFxuICAgICAgICAgICAgc29ydCA/IChzb3J0LmRlc2MgPyAnLXNvcnQtZGVzYycgOiAnLXNvcnQtYXNjJykgOiAnJyxcbiAgICAgICAgICAgIGNvbHVtbi5zb3J0YWJsZSAmJiAnLWN1cnNvci1wb2ludGVyJyxcbiAgICAgICAgICAgICFzaG93ICYmICctaGlkZGVuJyxcbiAgICAgICAgICApfVxuICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAuLi5zdHlsZXMsXG4gICAgICAgICAgICBmbGV4OiBgJHt3aWR0aH0gMCBhdXRvYCxcbiAgICAgICAgICAgIHdpZHRoOiBgJHt3aWR0aH1weGAsXG4gICAgICAgICAgICBtYXhXaWR0aDogYCR7bWF4V2lkdGh9cHhgXG4gICAgICAgICAgfX1cbiAgICAgICAgICB0b2dnbGVTb3J0PXsoZSkgPT4ge1xuICAgICAgICAgICAgY29sdW1uLnNvcnRhYmxlICYmIHRoaXMuc29ydENvbHVtbihjb2x1bW4sIGUuc2hpZnRLZXkpXG4gICAgICAgICAgfX1cbiAgICAgICAgICB7Li4ucmVzdH1cbiAgICAgICAgPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdydC1yZXNpemFibGUtaGVhZGVyLWNvbnRlbnQnPlxuICAgICAgICAgICAge18ubm9ybWFsaXplQ29tcG9uZW50KGNvbHVtbi5oZWFkZXIsIHtcbiAgICAgICAgICAgICAgZGF0YTogc29ydGVkRGF0YSxcbiAgICAgICAgICAgICAgY29sdW1uOiBjb2x1bW5cbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtyZXNpemVyfVxuICAgICAgICA8L1RoQ29tcG9uZW50PlxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IG1ha2VGaWx0ZXJzID0gKCkgPT4ge1xuICAgICAgY29uc3QgdGhlYWRGaWx0ZXJQcm9wcyA9IF8uc3BsaXRQcm9wcyhnZXRUaGVhZEZpbHRlclByb3BzKGZpbmFsU3RhdGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0aGlzKSlcbiAgICAgIGNvbnN0IHRoZWFkRmlsdGVyVHJQcm9wcyA9IF8uc3BsaXRQcm9wcyhnZXRUaGVhZEZpbHRlclRyUHJvcHMoZmluYWxTdGF0ZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHRoaXMpKVxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFRoZWFkQ29tcG9uZW50XG4gICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc25hbWVzKCctZmlsdGVycycsIHRoZWFkRmlsdGVyUHJvcHMuY2xhc3NOYW1lKX1cbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgLi4udGhlYWRGaWx0ZXJQcm9wcy5zdHlsZSxcbiAgICAgICAgICAgIG1pbldpZHRoOiBgJHtyb3dNaW5XaWR0aH1weGBcbiAgICAgICAgICB9fVxuICAgICAgICAgIHsuLi50aGVhZEZpbHRlclByb3BzLnJlc3R9XG4gICAgICAgID5cbiAgICAgICAgICA8VHJDb21wb25lbnRcbiAgICAgICAgICAgIGNsYXNzTmFtZT17dGhlYWRGaWx0ZXJUclByb3BzLmNsYXNzTmFtZX1cbiAgICAgICAgICAgIHN0eWxlPXt0aGVhZEZpbHRlclRyUHJvcHMuc3R5bGV9XG4gICAgICAgICAgICB7Li4udGhlYWRGaWx0ZXJUclByb3BzLnJlc3R9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2FsbFZpc2libGVDb2x1bW5zLm1hcChtYWtlRmlsdGVyKX1cbiAgICAgICAgICA8L1RyQ29tcG9uZW50PlxuICAgICAgICA8L1RoZWFkQ29tcG9uZW50PlxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IG1ha2VGaWx0ZXIgPSAoY29sdW1uLCBpKSA9PiB7XG4gICAgICBjb25zdCByZXNpemVkID0gcmVzaXppbmcuZmluZCh4ID0+IHguaWQgPT09IGNvbHVtbi5pZCkgfHwge31cbiAgICAgIGNvbnN0IHdpZHRoID0gXy5nZXRGaXJzdERlZmluZWQocmVzaXplZC52YWx1ZSwgY29sdW1uLndpZHRoLCBjb2x1bW4ubWluV2lkdGgpXG4gICAgICBjb25zdCBtYXhXaWR0aCA9IF8uZ2V0Rmlyc3REZWZpbmVkKHJlc2l6ZWQudmFsdWUsIGNvbHVtbi53aWR0aCwgY29sdW1uLm1heFdpZHRoKVxuICAgICAgY29uc3QgdGhlYWRGaWx0ZXJUaFByb3BzID0gXy5zcGxpdFByb3BzKGdldFRoZWFkRmlsdGVyVGhQcm9wcyhmaW5hbFN0YXRlLCB1bmRlZmluZWQsIGNvbHVtbiwgdGhpcykpXG4gICAgICBjb25zdCBjb2x1bW5IZWFkZXJQcm9wcyA9IF8uc3BsaXRQcm9wcyhjb2x1bW4uZ2V0SGVhZGVyUHJvcHMoZmluYWxTdGF0ZSwgdW5kZWZpbmVkLCBjb2x1bW4sIHRoaXMpKVxuXG4gICAgICBjb25zdCBjbGFzc2VzID0gW1xuICAgICAgICBjb2x1bW4uaGVhZGVyQ2xhc3NOYW1lLFxuICAgICAgICB0aGVhZEZpbHRlclRoUHJvcHMuY2xhc3NOYW1lLFxuICAgICAgICBjb2x1bW5IZWFkZXJQcm9wcy5jbGFzc05hbWVcbiAgICAgIF1cblxuICAgICAgY29uc3Qgc3R5bGVzID0ge1xuICAgICAgICAuLi5jb2x1bW4uaGVhZGVyU3R5bGUsXG4gICAgICAgIC4uLnRoZWFkRmlsdGVyVGhQcm9wcy5zdHlsZSxcbiAgICAgICAgLi4uY29sdW1uSGVhZGVyUHJvcHMuc3R5bGVcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdCA9IHtcbiAgICAgICAgLi4udGhlYWRGaWx0ZXJUaFByb3BzLnJlc3QsXG4gICAgICAgIC4uLmNvbHVtbkhlYWRlclByb3BzLnJlc3RcbiAgICAgIH1cblxuICAgICAgaWYgKGNvbHVtbi5leHBhbmRlcikge1xuICAgICAgICBpZiAoY29sdW1uLnBpdm90Q29sdW1ucykge1xuICAgICAgICAgIGNvbnN0IHBpdm90Q29scyA9IFtdXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2x1bW4ucGl2b3RDb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBjb2wgPSBjb2x1bW4ucGl2b3RDb2x1bW5zW2ldXG4gICAgICAgICAgICBjb25zdCBmaWx0ZXIgPSBmaWx0ZXJpbmcuZmluZChmaWx0ZXIgPT4gZmlsdGVyLmlkID09PSBjb2x1bW4uaWQgJiYgZmlsdGVyLnBpdm90SWQgPT09IGNvbC5pZClcbiAgICAgICAgICAgIHBpdm90Q29scy5wdXNoKFxuICAgICAgICAgICAgICA8c3BhbiBrZXk9e2NvbC5pZH1cbiAgICAgICAgICAgICAgICBzdHlsZT17e2ZsZXg6IDF9fT5cbiAgICAgICAgICAgICAgICB7IWNvbC5oaWRlRmlsdGVyID8gKFxuICAgICAgICAgICAgICAgICAgXy5ub3JtYWxpemVDb21wb25lbnQoY29sLmZpbHRlclJlbmRlcixcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbCxcbiAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgb25GaWx0ZXJDaGFuZ2U6ICh2YWx1ZSkgPT4gKHRoaXMuZmlsdGVyQ29sdW1uKGNvbHVtbiwgdmFsdWUsIGNvbCkpXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRzLmNvbHVtbi5maWx0ZXJSZW5kZXJcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgaWYgKGkgPCBjb2x1bW4ucGl2b3RDb2x1bW5zLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgcGl2b3RDb2xzLnB1c2goPEV4cGFuZGVyQ29tcG9uZW50IGtleT17Y29sLmlkICsgJy0nICsgaX0gLz4pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8VGhDb21wb25lbnRcbiAgICAgICAgICAgICAga2V5PXtpfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzbmFtZXMoXG4gICAgICAgICAgICAgICAgJ3J0LXBpdm90LWhlYWRlcicsXG4gICAgICAgICAgICAgICAgY29sdW1uLnNvcnRhYmxlICYmICctY3Vyc29yLXBvaW50ZXInLFxuICAgICAgICAgICAgICAgIGNsYXNzZXNcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAuLi5zdHlsZXMsXG4gICAgICAgICAgICAgICAgZmxleDogYCR7d2lkdGh9IDAgYXV0b2AsXG4gICAgICAgICAgICAgICAgd2lkdGg6IGAke3dpZHRofXB4YCxcbiAgICAgICAgICAgICAgICBtYXhXaWR0aDogYCR7bWF4V2lkdGh9cHhgLFxuICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4J1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICB7Li4ucmVzdH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge3Bpdm90Q29sc31cbiAgICAgICAgICAgIDwvVGhDb21wb25lbnQ+XG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPFRoQ29tcG9uZW50XG4gICAgICAgICAgICBrZXk9e2l9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzbmFtZXMoXG4gICAgICAgICAgICAgICdydC1leHBhbmRlci1oZWFkZXInLFxuICAgICAgICAgICAgICBjbGFzc2VzXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgLi4uc3R5bGVzLFxuICAgICAgICAgICAgICBmbGV4OiBgMCAwIGF1dG9gLFxuICAgICAgICAgICAgICB3aWR0aDogYCR7ZXhwYW5kZXJDb2x1bW5XaWR0aH1weGBcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICB7Li4ucmVzdH1cbiAgICAgICAgICAvPlxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGZpbHRlciA9IGZpbHRlcmluZy5maW5kKGZpbHRlciA9PiBmaWx0ZXIuaWQgPT09IGNvbHVtbi5pZClcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFRoQ29tcG9uZW50XG4gICAgICAgICAga2V5PXtpfVxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcyhcbiAgICAgICAgICAgIGNsYXNzZXNcbiAgICAgICAgICApfVxuICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAuLi5zdHlsZXMsXG4gICAgICAgICAgICBmbGV4OiBgJHt3aWR0aH0gMCBhdXRvYCxcbiAgICAgICAgICAgIHdpZHRoOiBgJHt3aWR0aH1weGAsXG4gICAgICAgICAgICBtYXhXaWR0aDogYCR7bWF4V2lkdGh9cHhgXG4gICAgICAgICAgfX1cbiAgICAgICAgICB7Li4ucmVzdH1cbiAgICAgICAgPlxuICAgICAgICAgIHshY29sdW1uLmhpZGVGaWx0ZXIgPyAoXG4gICAgICAgICAgICBfLm5vcm1hbGl6ZUNvbXBvbmVudChjb2x1bW4uZmlsdGVyUmVuZGVyLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29sdW1uLFxuICAgICAgICAgICAgICAgIGZpbHRlcixcbiAgICAgICAgICAgICAgICBvbkZpbHRlckNoYW5nZTogKHZhbHVlKSA9PiAodGhpcy5maWx0ZXJDb2x1bW4oY29sdW1uLCB2YWx1ZSkpXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGRlZmF1bHRzLmNvbHVtbi5maWx0ZXJSZW5kZXJcbiAgICAgICAgICAgIClcbiAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgPC9UaENvbXBvbmVudD5cbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCBtYWtlUGFnZVJvdyA9IChyb3csIGksIHBhdGggPSBbXSkgPT4ge1xuICAgICAgY29uc3Qgcm93SW5mbyA9IHtcbiAgICAgICAgcm93OiByb3cuX19vcmlnaW5hbCxcbiAgICAgICAgcm93VmFsdWVzOiByb3csXG4gICAgICAgIGluZGV4OiByb3cuX19pbmRleCxcbiAgICAgICAgdmlld0luZGV4OiArK3Jvd0luZGV4LFxuICAgICAgICBsZXZlbDogcGF0aC5sZW5ndGgsXG4gICAgICAgIG5lc3RpbmdQYXRoOiBwYXRoLmNvbmNhdChbaV0pLFxuICAgICAgICBhZ2dyZWdhdGVkOiAhIXJvd1tzdWJSb3dzS2V5XSxcbiAgICAgICAgc3ViUm93czogcm93W3N1YlJvd3NLZXldXG4gICAgICB9XG4gICAgICBjb25zdCBpc0V4cGFuZGVkID0gXy5nZXQoZXhwYW5kZWRSb3dzLCByb3dJbmZvLm5lc3RpbmdQYXRoKVxuICAgICAgY29uc3QgdHJHcm91cFByb3BzID0gZ2V0VHJHcm91cFByb3BzKGZpbmFsU3RhdGUsIHJvd0luZm8sIHVuZGVmaW5lZCwgdGhpcylcbiAgICAgIGNvbnN0IHRyUHJvcHMgPSBfLnNwbGl0UHJvcHMoZ2V0VHJQcm9wcyhmaW5hbFN0YXRlLCByb3dJbmZvLCB1bmRlZmluZWQsIHRoaXMpKVxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFRyR3JvdXBDb21wb25lbnRcbiAgICAgICAgICBrZXk9e3Jvd0luZm8ubmVzdGluZ1BhdGguam9pbignXycpfVxuICAgICAgICAgIHsuLi50ckdyb3VwUHJvcHN9XG4gICAgICAgID5cbiAgICAgICAgICA8VHJDb21wb25lbnRcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcyhcbiAgICAgICAgICAgICAgdHJQcm9wcy5jbGFzc05hbWUsXG4gICAgICAgICAgICAgIHJvdy5fdmlld0luZGV4ICUgMiA/ICctZXZlbicgOiAnLW9kZCdcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBzdHlsZT17dHJQcm9wcy5zdHlsZX1cbiAgICAgICAgICAgIHsuLi50clByb3BzLnJlc3R9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2FsbFZpc2libGVDb2x1bW5zLm1hcCgoY29sdW1uLCBpMikgPT4ge1xuICAgICAgICAgICAgICBjb25zdCByZXNpemVkID0gcmVzaXppbmcuZmluZCh4ID0+IHguaWQgPT09IGNvbHVtbi5pZCkgfHwge31cbiAgICAgICAgICAgICAgY29uc3Qgc2hvdyA9IHR5cGVvZiBjb2x1bW4uc2hvdyA9PT0gJ2Z1bmN0aW9uJyA/IGNvbHVtbi5zaG93KCkgOiBjb2x1bW4uc2hvd1xuICAgICAgICAgICAgICBjb25zdCB3aWR0aCA9IF8uZ2V0Rmlyc3REZWZpbmVkKHJlc2l6ZWQudmFsdWUsIGNvbHVtbi53aWR0aCwgY29sdW1uLm1pbldpZHRoKVxuICAgICAgICAgICAgICBjb25zdCBtYXhXaWR0aCA9IF8uZ2V0Rmlyc3REZWZpbmVkKHJlc2l6ZWQudmFsdWUsIGNvbHVtbi53aWR0aCwgY29sdW1uLm1heFdpZHRoKVxuICAgICAgICAgICAgICBjb25zdCB0ZFByb3BzID0gXy5zcGxpdFByb3BzKGdldFRkUHJvcHMoZmluYWxTdGF0ZSwgcm93SW5mbywgY29sdW1uLCB0aGlzKSlcbiAgICAgICAgICAgICAgY29uc3QgY29sdW1uUHJvcHMgPSBfLnNwbGl0UHJvcHMoY29sdW1uLmdldFByb3BzKGZpbmFsU3RhdGUsIHJvd0luZm8sIGNvbHVtbiwgdGhpcykpXG5cbiAgICAgICAgICAgICAgY29uc3QgY2xhc3NlcyA9IFtcbiAgICAgICAgICAgICAgICB0ZFByb3BzLmNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgIGNvbHVtblByb3BzLmNsYXNzTmFtZVxuICAgICAgICAgICAgICBdXG5cbiAgICAgICAgICAgICAgY29uc3Qgc3R5bGVzID0ge1xuICAgICAgICAgICAgICAgIC4uLnRkUHJvcHMuc3R5bGUsXG4gICAgICAgICAgICAgICAgLi4uY29sdW1uLnN0eWxlLFxuICAgICAgICAgICAgICAgIC4uLmNvbHVtblByb3BzLnN0eWxlXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoY29sdW1uLmV4cGFuZGVyKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb25UZENsaWNrID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmIChvbkV4cGFuZFJvdykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25FeHBhbmRSb3cocm93SW5mby5uZXN0aW5nUGF0aCwgZSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGxldCBuZXdFeHBhbmRlZFJvd3MgPSBfLmNsb25lKGV4cGFuZGVkUm93cylcbiAgICAgICAgICAgICAgICAgIGlmIChpc0V4cGFuZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNldFN0YXRlV2l0aERhdGEoe1xuICAgICAgICAgICAgICAgICAgICAgIGV4cGFuZGVkUm93czogXy5zZXQobmV3RXhwYW5kZWRSb3dzLCByb3dJbmZvLm5lc3RpbmdQYXRoLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNldFN0YXRlV2l0aERhdGEoe1xuICAgICAgICAgICAgICAgICAgICBleHBhbmRlZFJvd3M6IF8uc2V0KG5ld0V4cGFuZGVkUm93cywgcm93SW5mby5uZXN0aW5nUGF0aCwge30pXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4ucGl2b3RDb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgICAvLyBSZXR1cm4gdGhlIHBpdm90IGV4cGFuZGVyIGNlbGxcbiAgICAgICAgICAgICAgICAgIGNvbnN0IFBpdm90Q2VsbCA9IGNvbHVtbi5waXZvdFJlbmRlclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFRkQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAga2V5PXtpMn1cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzbmFtZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAncnQtcGl2b3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3Nlc1xuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnN0eWxlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdMZWZ0OiByb3dJbmZvLm5lc3RpbmdQYXRoLmxlbmd0aCA9PT0gMSA/IHVuZGVmaW5lZCA6IGAkezMwICogKHJvd0luZm8ubmVzdGluZ1BhdGgubGVuZ3RoIC0gMSl9cHhgLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmxleDogYCR7d2lkdGh9IDAgYXV0b2AsXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogYCR7d2lkdGh9cHhgLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGg6IGAke21heFdpZHRofXB4YFxuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgey4uLnRkUHJvcHMucmVzdH1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtvblRkQ2xpY2t9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICB7cm93SW5mby5zdWJSb3dzID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxFeHBhbmRlckNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRXhwYW5kZWQ9e2lzRXhwYW5kZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtjb2x1bW4gJiYgY29sdW1uLnBpdm90UmVuZGVyID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQaXZvdENlbGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsuLi5yb3dJbmZvfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3Jvd0luZm8ucm93VmFsdWVzW3Bpdm90VmFsS2V5XX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIDogPHNwYW4+e3Jvd1twaXZvdFZhbEtleV19ICh7cm93SW5mby5zdWJSb3dzLmxlbmd0aH0pPC9zcGFuPn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICApIDogU3ViQ29tcG9uZW50ID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxFeHBhbmRlckNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRXhwYW5kZWQ9e2lzRXhwYW5kZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIDwvVGRDb21wb25lbnQ+XG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSByZWd1bGFyIGV4cGFuZGVyIGNlbGxcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgPFRkQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgIGtleT17aTJ9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcyhcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc2VzLFxuICAgICAgICAgICAgICAgICAgICAgIHtoaWRkZW46ICFzaG93fVxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgIC4uLnN0eWxlcyxcbiAgICAgICAgICAgICAgICAgICAgICBmbGV4OiBgMCAwIGF1dG9gLFxuICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBgJHtleHBhbmRlckNvbHVtbldpZHRofXB4YFxuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtvblRkQ2xpY2t9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDxFeHBhbmRlckNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNFeHBhbmRlZD17aXNFeHBhbmRlZH1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8L1RkQ29tcG9uZW50PlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIFJldHVybiByZWd1bGFyIGNlbGxcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8VGRDb21wb25lbnRcbiAgICAgICAgICAgICAgICAgIGtleT17aTJ9XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzbmFtZXMoXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzZXMsXG4gICAgICAgICAgICAgICAgICAgICFzaG93ICYmICdoaWRkZW4nXG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgLi4uc3R5bGVzLFxuICAgICAgICAgICAgICAgICAgICBmbGV4OiBgJHt3aWR0aH0gMCBhdXRvYCxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGAke3dpZHRofXB4YCxcbiAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGg6IGAke21heFdpZHRofXB4YFxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHsuLi50ZFByb3BzLnJlc3R9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge18ubm9ybWFsaXplQ29tcG9uZW50KGNvbHVtbi5yZW5kZXIsIHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucm93SW5mbyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJvd0luZm8ucm93VmFsdWVzW2NvbHVtbi5pZF1cbiAgICAgICAgICAgICAgICAgIH0sIHJvd0luZm8ucm93VmFsdWVzW2NvbHVtbi5pZF0pfVxuICAgICAgICAgICAgICAgIDwvVGRDb21wb25lbnQ+XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvVHJDb21wb25lbnQ+XG4gICAgICAgICAgeyhcbiAgICAgICAgICAgIHJvd0luZm8uc3ViUm93cyAmJlxuICAgICAgICAgICAgaXNFeHBhbmRlZCAmJlxuICAgICAgICAgICAgcm93SW5mby5zdWJSb3dzLm1hcCgoZCwgaSkgPT4gbWFrZVBhZ2VSb3coZCwgaSwgcm93SW5mby5uZXN0aW5nUGF0aCkpXG4gICAgICAgICAgKX1cbiAgICAgICAgICB7U3ViQ29tcG9uZW50ICYmICFyb3dJbmZvLnN1YlJvd3MgJiYgaXNFeHBhbmRlZCAmJiBTdWJDb21wb25lbnQocm93SW5mbyl9XG4gICAgICAgIDwvVHJHcm91cENvbXBvbmVudD5cbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCBtYWtlUGFkUm93ID0gKHJvdywgaSkgPT4ge1xuICAgICAgY29uc3QgdHJHcm91cFByb3BzID0gZ2V0VHJHcm91cFByb3BzKGZpbmFsU3RhdGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0aGlzKVxuICAgICAgY29uc3QgdHJQcm9wcyA9IF8uc3BsaXRQcm9wcyhnZXRUclByb3BzKGZpbmFsU3RhdGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0aGlzKSlcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxUckdyb3VwQ29tcG9uZW50XG4gICAgICAgICAga2V5PXtpfVxuICAgICAgICAgIHsuLi50ckdyb3VwUHJvcHN9XG4gICAgICAgID5cbiAgICAgICAgICA8VHJDb21wb25lbnRcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcyhcbiAgICAgICAgICAgICAgJy1wYWRSb3cnLFxuICAgICAgICAgICAgICB0clByb3BzLmNsYXNzTmFtZSxcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBzdHlsZT17dHJQcm9wcy5zdHlsZSB8fCB7fX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7YWxsVmlzaWJsZUNvbHVtbnMubWFwKChjb2x1bW4sIGkyKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHJlc2l6ZWQgPSByZXNpemluZy5maW5kKHggPT4geC5pZCA9PT0gY29sdW1uLmlkKSB8fCB7fVxuICAgICAgICAgICAgICBjb25zdCBzaG93ID0gdHlwZW9mIGNvbHVtbi5zaG93ID09PSAnZnVuY3Rpb24nID8gY29sdW1uLnNob3coKSA6IGNvbHVtbi5zaG93XG4gICAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gXy5nZXRGaXJzdERlZmluZWQocmVzaXplZC52YWx1ZSwgY29sdW1uLndpZHRoLCBjb2x1bW4ubWluV2lkdGgpXG4gICAgICAgICAgICAgIGNvbnN0IG1heFdpZHRoID0gXy5nZXRGaXJzdERlZmluZWQocmVzaXplZC52YWx1ZSwgY29sdW1uLndpZHRoLCBjb2x1bW4ubWF4V2lkdGgpXG4gICAgICAgICAgICAgIGNvbnN0IHRkUHJvcHMgPSBfLnNwbGl0UHJvcHMoZ2V0VGRQcm9wcyhmaW5hbFN0YXRlLCB1bmRlZmluZWQsIGNvbHVtbiwgdGhpcykpXG4gICAgICAgICAgICAgIGNvbnN0IGNvbHVtblByb3BzID0gXy5zcGxpdFByb3BzKGNvbHVtbi5nZXRQcm9wcyhmaW5hbFN0YXRlLCB1bmRlZmluZWQsIGNvbHVtbiwgdGhpcykpXG5cbiAgICAgICAgICAgICAgY29uc3QgY2xhc3NlcyA9IFtcbiAgICAgICAgICAgICAgICB0ZFByb3BzLmNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgIGNvbHVtblByb3BzLmNsYXNzTmFtZVxuICAgICAgICAgICAgICBdXG5cbiAgICAgICAgICAgICAgY29uc3Qgc3R5bGVzID0ge1xuICAgICAgICAgICAgICAgIC4uLnRkUHJvcHMuc3R5bGUsXG4gICAgICAgICAgICAgICAgLi4uY29sdW1uLnN0eWxlLFxuICAgICAgICAgICAgICAgIC4uLmNvbHVtblByb3BzLnN0eWxlXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxUZENvbXBvbmVudFxuICAgICAgICAgICAgICAgICAga2V5PXtpMn1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcyhcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NlcyxcbiAgICAgICAgICAgICAgICAgICAgIXNob3cgJiYgJ2hpZGRlbidcbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAuLi5zdHlsZXMsXG4gICAgICAgICAgICAgICAgICAgIGZsZXg6IGAke3dpZHRofSAwIGF1dG9gLFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogYCR7d2lkdGh9cHhgLFxuICAgICAgICAgICAgICAgICAgICBtYXhXaWR0aDogYCR7bWF4V2lkdGh9cHhgXG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgey4uLnRkUHJvcHMucmVzdH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAmbmJzcDtcbiAgICAgICAgICAgICAgICA8L1RkQ29tcG9uZW50PlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICA8L1RyQ29tcG9uZW50PlxuICAgICAgICA8L1RyR3JvdXBDb21wb25lbnQ+XG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgbWFrZUNvbHVtbkZvb3RlcnMgPSAoKSA9PiB7XG4gICAgICBjb25zdCB0Rm9vdFByb3BzID0gZ2V0VGZvb3RQcm9wcyhmaW5hbFN0YXRlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdGhpcylcbiAgICAgIGNvbnN0IHRGb290VHJQcm9wcyA9IF8uc3BsaXRQcm9wcyhnZXRUZm9vdFRyUHJvcHMoZmluYWxTdGF0ZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHRoaXMpKVxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFRmb290Q29tcG9uZW50XG4gICAgICAgICAgY2xhc3NOYW1lPXt0Rm9vdFByb3BzLmNsYXNzTmFtZX1cbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgLi4udEZvb3RQcm9wcy5zdHlsZSxcbiAgICAgICAgICAgIG1pbldpZHRoOiBgJHtyb3dNaW5XaWR0aH1weGBcbiAgICAgICAgICB9fVxuICAgICAgICAgIHsuLi50Rm9vdFByb3BzLnJlc3R9XG4gICAgICAgID5cbiAgICAgICAgICA8VHJDb21wb25lbnRcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcyhcbiAgICAgICAgICAgICAgdEZvb3RUclByb3BzLmNsYXNzTmFtZVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIHN0eWxlPXt0Rm9vdFRyUHJvcHMuc3R5bGV9XG4gICAgICAgICAgICB7Li4udEZvb3RUclByb3BzLnJlc3R9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2FsbFZpc2libGVDb2x1bW5zLm1hcCgoY29sdW1uLCBpMikgPT4ge1xuICAgICAgICAgICAgICBjb25zdCByZXNpemVkID0gcmVzaXppbmcuZmluZCh4ID0+IHguaWQgPT09IGNvbHVtbi5pZCkgfHwge31cbiAgICAgICAgICAgICAgY29uc3Qgc2hvdyA9IHR5cGVvZiBjb2x1bW4uc2hvdyA9PT0gJ2Z1bmN0aW9uJyA/IGNvbHVtbi5zaG93KCkgOiBjb2x1bW4uc2hvd1xuICAgICAgICAgICAgICBjb25zdCB3aWR0aCA9IF8uZ2V0Rmlyc3REZWZpbmVkKHJlc2l6ZWQudmFsdWUsIGNvbHVtbi53aWR0aCwgY29sdW1uLm1pbldpZHRoKVxuICAgICAgICAgICAgICBjb25zdCBtYXhXaWR0aCA9IF8uZ2V0Rmlyc3REZWZpbmVkKHJlc2l6ZWQudmFsdWUsIGNvbHVtbi53aWR0aCwgY29sdW1uLm1heFdpZHRoKVxuICAgICAgICAgICAgICBjb25zdCB0Rm9vdFRkUHJvcHMgPSBfLnNwbGl0UHJvcHMoZ2V0VGZvb3RUZFByb3BzKGZpbmFsU3RhdGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0aGlzKSlcbiAgICAgICAgICAgICAgY29uc3QgY29sdW1uUHJvcHMgPSBfLnNwbGl0UHJvcHMoY29sdW1uLmdldFByb3BzKGZpbmFsU3RhdGUsIHVuZGVmaW5lZCwgY29sdW1uLCB0aGlzKSlcbiAgICAgICAgICAgICAgY29uc3QgY29sdW1uRm9vdGVyUHJvcHMgPSBfLnNwbGl0UHJvcHMoY29sdW1uLmdldEZvb3RlclByb3BzKGZpbmFsU3RhdGUsIHVuZGVmaW5lZCwgY29sdW1uLCB0aGlzKSlcblxuICAgICAgICAgICAgICBjb25zdCBjbGFzc2VzID0gW1xuICAgICAgICAgICAgICAgIHRGb290VGRQcm9wcy5jbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICBjb2x1bW5Qcm9wcy5jbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgY29sdW1uRm9vdGVyUHJvcHMuY2xhc3NOYW1lXG4gICAgICAgICAgICAgIF1cblxuICAgICAgICAgICAgICBjb25zdCBzdHlsZXMgPSB7XG4gICAgICAgICAgICAgICAgLi4udEZvb3RUZFByb3BzLnN0eWxlLFxuICAgICAgICAgICAgICAgIC4uLmNvbHVtbi5zdHlsZSxcbiAgICAgICAgICAgICAgICAuLi5jb2x1bW5Qcm9wcy5zdHlsZSxcbiAgICAgICAgICAgICAgICAuLi5jb2x1bW5Gb290ZXJQcm9wcy5zdHlsZVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKGNvbHVtbi5leHBhbmRlcikge1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4ucGl2b3RDb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8VGRDb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgICBrZXk9e2kyfVxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICdydC1waXZvdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc2VzXG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uc3R5bGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmxleDogYCR7d2lkdGh9IDAgYXV0b2AsXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogYCR7d2lkdGh9cHhgLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGg6IGAke21heFdpZHRofXB4YFxuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgey4uLmNvbHVtblByb3BzLnJlc3R9XG4gICAgICAgICAgICAgICAgICAgICAgey4uLnRGb290VGRQcm9wcy5yZXN0fVxuICAgICAgICAgICAgICAgICAgICAgIHsuLi5jb2x1bW5Gb290ZXJQcm9wcy5yZXN0fVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAge18ubm9ybWFsaXplQ29tcG9uZW50KGNvbHVtbi5mb290ZXIpfVxuICAgICAgICAgICAgICAgICAgICA8L1RkQ29tcG9uZW50PlxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFJldHVybiB0aGUgcmVndWxhciBleHBhbmRlciBjZWxsXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxUZENvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICBrZXk9e2kyfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzbmFtZXMoXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NlcyxcbiAgICAgICAgICAgICAgICAgICAgICB7aGlkZGVuOiAhc2hvd31cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAuLi5zdHlsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgZmxleDogYDAgMCBhdXRvYCxcbiAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogYCR7ZXhwYW5kZXJDb2x1bW5XaWR0aH1weGBcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gUmV0dXJuIHJlZ3VsYXIgY2VsbFxuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxUZENvbXBvbmVudFxuICAgICAgICAgICAgICAgICAga2V5PXtpMn1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcyhcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NlcyxcbiAgICAgICAgICAgICAgICAgICAgIXNob3cgJiYgJ2hpZGRlbidcbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAuLi5zdHlsZXMsXG4gICAgICAgICAgICAgICAgICAgIGZsZXg6IGAke3dpZHRofSAwIGF1dG9gLFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogYCR7d2lkdGh9cHhgLFxuICAgICAgICAgICAgICAgICAgICBtYXhXaWR0aDogYCR7bWF4V2lkdGh9cHhgXG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgey4uLmNvbHVtblByb3BzLnJlc3R9XG4gICAgICAgICAgICAgICAgICB7Li4udEZvb3RUZFByb3BzLnJlc3R9XG4gICAgICAgICAgICAgICAgICB7Li4uY29sdW1uRm9vdGVyUHJvcHMucmVzdH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7Xy5ub3JtYWxpemVDb21wb25lbnQoY29sdW1uLmZvb3Rlciwge1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBzb3J0ZWREYXRhLFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW46IGNvbHVtblxuICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgPC9UZENvbXBvbmVudD5cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSl9XG4gICAgICAgICAgPC9UckNvbXBvbmVudD5cbiAgICAgICAgPC9UZm9vdENvbXBvbmVudD5cbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCByb290UHJvcHMgPSBfLnNwbGl0UHJvcHMoZ2V0UHJvcHMoZmluYWxTdGF0ZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHRoaXMpKVxuICAgIGNvbnN0IHRhYmxlUHJvcHMgPSBfLnNwbGl0UHJvcHMoZ2V0VGFibGVQcm9wcyhmaW5hbFN0YXRlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdGhpcykpXG4gICAgY29uc3QgdEJvZHlQcm9wcyA9IF8uc3BsaXRQcm9wcyhnZXRUYm9keVByb3BzKGZpbmFsU3RhdGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0aGlzKSlcbiAgICBjb25zdCBwYWdpbmF0aW9uUHJvcHMgPSBfLnNwbGl0UHJvcHMoZ2V0UGFnaW5hdGlvblByb3BzKGZpbmFsU3RhdGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0aGlzKSlcbiAgICBjb25zdCBsb2FkaW5nUHJvcHMgPSBnZXRMb2FkaW5nUHJvcHMoZmluYWxTdGF0ZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHRoaXMpXG4gICAgY29uc3Qgbm9EYXRhUHJvcHMgPSBnZXROb0RhdGFQcm9wcyhmaW5hbFN0YXRlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdGhpcylcbiAgICBjb25zdCByZXNpemVyUHJvcHMgPSBnZXRSZXNpemVyUHJvcHMoZmluYWxTdGF0ZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHRoaXMpXG5cbiAgICBjb25zdCBtYWtlVGFibGUgPSAoKSA9PiAoXG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcyhcbiAgICAgICAgICAnUmVhY3RUYWJsZScsXG4gICAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgICAgIHJvb3RQcm9wcy5jbGFzc05hbWVcbiAgICAgICAgKX1cbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAuLi5zdHlsZSxcbiAgICAgICAgICAuLi5yb290UHJvcHMuc3R5bGVcbiAgICAgICAgfX1cbiAgICAgICAgey4uLnJvb3RQcm9wcy5yZXN0fVxuICAgICAgPlxuICAgICAgICA8VGFibGVDb21wb25lbnRcbiAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzbmFtZXModGFibGVQcm9wcy5jbGFzc05hbWUpfVxuICAgICAgICAgIHN0eWxlPXt0YWJsZVByb3BzLnN0eWxlfVxuICAgICAgICAgIHsuLi50YWJsZVByb3BzLnJlc3R9XG4gICAgICAgID5cbiAgICAgICAgICB7aGFzSGVhZGVyR3JvdXBzID8gbWFrZUhlYWRlckdyb3VwcygpIDogbnVsbH1cbiAgICAgICAgICB7bWFrZUhlYWRlcnMoKX1cbiAgICAgICAgICB7c2hvd0ZpbHRlcnMgPyBtYWtlRmlsdGVycygpIDogbnVsbH1cbiAgICAgICAgICA8VGJvZHlDb21wb25lbnRcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcyh0Qm9keVByb3BzLmNsYXNzTmFtZSl9XG4gICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAuLi50Qm9keVByb3BzLnN0eWxlLFxuICAgICAgICAgICAgICBtaW5XaWR0aDogYCR7cm93TWluV2lkdGh9cHhgXG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgey4uLnRCb2R5UHJvcHMucmVzdH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7cGFnZVJvd3MubWFwKChkLCBpKSA9PiBtYWtlUGFnZVJvdyhkLCBpKSl9XG4gICAgICAgICAgICB7cGFkUm93cy5tYXAobWFrZVBhZFJvdyl9XG4gICAgICAgICAgPC9UYm9keUNvbXBvbmVudD5cbiAgICAgICAgICB7aGFzQ29sdW1uRm9vdGVyID8gbWFrZUNvbHVtbkZvb3RlcnMoKSA6IG51bGx9XG4gICAgICAgIDwvVGFibGVDb21wb25lbnQ+XG4gICAgICAgIHtzaG93UGFnaW5hdGlvbiA/IChcbiAgICAgICAgICA8UGFnaW5hdGlvbkNvbXBvbmVudFxuICAgICAgICAgICAgey4uLnJlc29sdmVkU3RhdGV9XG4gICAgICAgICAgICBwYWdlcz17cGFnZXN9XG4gICAgICAgICAgICBjYW5QcmV2aW91cz17Y2FuUHJldmlvdXN9XG4gICAgICAgICAgICBjYW5OZXh0PXtjYW5OZXh0fVxuICAgICAgICAgICAgb25QYWdlQ2hhbmdlPXt0aGlzLm9uUGFnZUNoYW5nZX1cbiAgICAgICAgICAgIG9uUGFnZVNpemVDaGFuZ2U9e3RoaXMub25QYWdlU2l6ZUNoYW5nZX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17cGFnaW5hdGlvblByb3BzLmNsYXNzTmFtZX1cbiAgICAgICAgICAgIHN0eWxlPXtwYWdpbmF0aW9uUHJvcHMuc3R5bGV9XG4gICAgICAgICAgICB7Li4ucGFnaW5hdGlvblByb3BzLnJlc3R9XG4gICAgICAgICAgLz5cbiAgICAgICAgKSA6IG51bGx9XG4gICAgICAgIHshcGFnZVJvd3MubGVuZ3RoICYmIChcbiAgICAgICAgICA8Tm9EYXRhQ29tcG9uZW50XG4gICAgICAgICAgICB7Li4ubm9EYXRhUHJvcHN9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge18ubm9ybWFsaXplQ29tcG9uZW50KG5vRGF0YVRleHQpfVxuICAgICAgICAgIDwvTm9EYXRhQ29tcG9uZW50PlxuICAgICAgICApfVxuICAgICAgICA8TG9hZGluZ0NvbXBvbmVudFxuICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmd9XG4gICAgICAgICAgbG9hZGluZ1RleHQ9e2xvYWRpbmdUZXh0fVxuICAgICAgICAgIHsuLi5sb2FkaW5nUHJvcHN9XG4gICAgICAgIC8+XG4gICAgICA8L2Rpdj5cbiAgICApXG5cbiAgICAvLyBjaGlsZFByb3BzIGFyZSBvcHRpb25hbGx5IHBhc3NlZCB0byBhIGZ1bmN0aW9uLWFzLWEtY2hpbGRcbiAgICByZXR1cm4gY2hpbGRyZW4gPyBjaGlsZHJlbihmaW5hbFN0YXRlLCBtYWtlVGFibGUsIHRoaXMpIDogbWFrZVRhYmxlKClcbiAgfVxufSlcbiJdfQ==